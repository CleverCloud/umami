(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{54259:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/websites/[id]",function(){return t(31889)}])},16822:function(e,s,t){"use strict";t.d(s,{Z:function(){return I}});var n=t(85893),l=t(29120),i=t(9008),r=t.n(i),a=t(41664),o=t.n(a),c=t(11163),u=t(94184),d=t.n(u),m=t(43756),x=t(80483),_=t(52438),h=t(44085),j=t(18927),v=t(35177),b=t.n(v),f=t(91998),p=t(83454),N=function(){let{formatMessage:e,labels:s}=(0,h.Z)(),{user:t}=(0,j.Z)(),i=(0,c.useRouter)(),{dir:r}=(0,f.Z)(),a=!!p.env.cloudMode;return(0,n.jsxs)(l.qh,{children:[(0,n.jsxs)(l.zx,{variant:"quiet",children:[(0,n.jsx)(l.JO,{children:(0,n.jsx)(m.Z.Profile,{})}),(0,n.jsx)(l.JO,{size:"sm",children:(0,n.jsx)(m.Z.ChevronDown,{})})]}),(0,n.jsx)(l.GI,{position:"bottom",alignment:"rtl"===r?"start":"end",children:(0,n.jsxs)(l.v2,{variant:"popup",onSelect:e=>{"profile"===e&&i.push("/settings/profile"),"logout"===e&&i.push("/logout")},className:b().menu,children:[(0,n.jsx)(l.ck,{className:b().item,children:(0,n.jsx)(l.xv,{children:t.username})},"user"),(0,n.jsxs)(l.ck,{className:b().item,divider:!0,children:[(0,n.jsx)(l.JO,{children:(0,n.jsx)(m.Z.User,{})}),(0,n.jsx)(l.xv,{children:e(s.profile)})]},"profile"),!a&&(0,n.jsxs)(l.ck,{className:b().item,children:[(0,n.jsx)(l.JO,{children:(0,n.jsx)(m.Z.Logout,{})}),(0,n.jsx)(l.xv,{children:e(s.logout)})]},"logout")]})})]})},g=t(67294),k=t(73935),Z=t(93766),w=t.n(Z),y=function(e){let{items:s=[],onClose:t}=e,{pathname:l}=(0,c.useRouter)(),i=e=>{let{items:s,className:r}=e;return(0,n.jsx)("div",{className:d()(w().items,r),children:s.map(e=>{let{label:s,url:r,children:a}=e,c=l.startsWith(r);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o(),{href:r,className:d()(w().item,{[w().selected]:c}),onClick:t,children:s},r),a&&(0,n.jsx)(i,{items:a,className:w().submenu})]})})})};return(0,k.createPortal)((0,n.jsx)("div",{className:d()(w().menu),children:(0,n.jsx)(i,{items:s})}),document.body)},C=t(83454),M=function(){let{formatMessage:e,labels:s}=(0,h.Z)(),[t,i]=(0,g.useState)(!1),r=!!C.env.cloudMode,a=[{label:e(s.dashboard),url:"/dashboard"},!r&&{label:e(s.settings),url:"/settings",children:[{label:e(s.websites),url:"/settings/websites"},{label:e(s.teams),url:"/settings/teams"},{label:e(s.users),url:"/settings/users"},{label:e(s.profile),url:"/settings/profile"}]},r&&{label:e(s.profile),url:"/settings/profile"},!r&&{label:e(s.logout),url:"/logout"}].filter(e=>e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{variant:"quiet",onClick:()=>i(e=>!e),children:(0,n.jsx)(l.JO,{children:t?(0,n.jsx)(m.Z.Close,{}):(0,n.jsx)(m.Z.Menu,{})})}),t&&(0,n.jsx)(y,{items:a,onClose:()=>i(!1)})]})},B=t(52963),U=t.n(B),L=function(){let{pathname:e}=(0,c.useRouter)(),{formatMessage:s,labels:t}=(0,h.Z)(),i=[{label:s(t.dashboard),url:"/dashboard"},{label:s(t.websites),url:"/websites"},{label:s(t.reports),url:"/reports"},{label:s(t.settings),url:"/settings"}].filter(e=>e);return(0,n.jsx)("div",{className:d()(U().navbar),children:(0,n.jsxs)(l.X2,{children:[(0,n.jsxs)(l.sg,{className:U().left,children:[(0,n.jsxs)("div",{className:U().logo,children:[(0,n.jsx)(l.JO,{size:"lg",children:(0,n.jsx)(m.Z.Logo,{})}),(0,n.jsx)(l.xv,{className:U().text,children:"umami"})]}),(0,n.jsx)("div",{className:U().links,children:i.map(s=>{let{url:t,label:i}=s;return(0,n.jsx)(o(),{href:t,className:d()({[U().selected]:e.startsWith(t)}),children:(0,n.jsx)(l.xv,{children:i})},t)})})]}),(0,n.jsxs)(l.sg,{className:U().right,children:[(0,n.jsxs)("div",{className:U().actions,children:[(0,n.jsx)(x.Z,{}),(0,n.jsx)(_.Z,{}),(0,n.jsx)(N,{})]}),(0,n.jsx)("div",{className:U().mobile,children:(0,n.jsx)(M,{})})]})]})})},O=t(32955),R=t(64529),S=t(12902),z=t(81249),A=t.n(z),E=t(73865);let F={current:E.we,latest:null,hasUpdate:!1,checked:!1,releaseUrl:null},J=(0,R.Ue)(()=>({...F}));async function P(){let{current:e}=J.getState(),s=await fetch("".concat(E.nI,"?v=").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.ok?e.json():null);s&&J.setState((0,S.Uy)(t=>{let{latest:n,url:l}=s,i=(0,O.rV)(E.aC),r=!!(n&&(null==i?void 0:i.version)!==n&&A().gt(n,e));return t.current=e,t.latest=n,t.hasUpdate=r,t.checked=!0,t.releaseUrl=l,t}))}var D=t(82299),q=t.n(D),G=function(e){let{user:s,config:t}=e,{formatMessage:i,labels:r,messages:a}=(0,h.Z)(),{latest:o,checked:u,hasUpdate:d,releaseUrl:m}=J(),{pathname:x}=(0,c.useRouter)(),[_,j]=(0,g.useState)(u),v=(null==s?void 0:s.isAdmin)&&!(null==t?void 0:t.updatesDisabled)&&!(null==t?void 0:t.cloudMode)&&!x.includes("/share/")&&!_,b=(0,g.useCallback)(()=>{(0,O.LS)(E.aC,{version:o,time:Date.now()})},[o]);return((0,g.useEffect)(()=>{v&&P()},[v]),v&&d)?(0,k.createPortal)((0,n.jsxs)(l.X2,{className:q().notice,children:[(0,n.jsx)(l.sg,{variant:"two",className:q().message,children:i(a.newVersionAvailable,{version:"v".concat(o)})}),(0,n.jsxs)(l.sg,{className:q().buttons,children:[(0,n.jsx)(l.zx,{variant:"primary",onClick:function(){b(),j(!0),open(m||E.Bv,"_blank")},children:i(r.viewDetails)}),(0,n.jsx)(l.zx,{onClick:function(){b(),j(!0)},children:i(r.dismiss)})]})]}),document.body):null},W=t(24474),T=t(51327),X=t.n(T),I=function(e){let{title:s,children:t}=e,{user:i}=(0,W.Gb)(),a=(0,W.ZR)();return!i||!a||(null==a?void 0:a.uiDisabled)?null:(0,n.jsxs)("div",{className:X().layout,children:[(0,n.jsx)(G,{user:i,config:a}),(0,n.jsx)(r(),{children:(0,n.jsx)("title",{children:s?"".concat(s," | umami"):"umami"})}),(0,n.jsx)("nav",{className:X().nav,children:(0,n.jsx)(L,{})}),(0,n.jsx)("main",{className:X().body,children:(0,n.jsx)(l.W2,{children:t})})]})}},31889:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var n=t(85893),l=t(11163),i=t(16822),r=t(48206),a=t(44085);function o(){let{formatMessage:e,labels:s}=(0,a.Z)(),t=(0,l.useRouter)(),{id:o}=t.query;return o?(0,n.jsx)(i.Z,{title:e(s.websites),children:(0,n.jsx)(r.Z,{websiteId:o})}):null}},93766:function(e){e.exports={menu:"MobileMenu_menu__DO6aZ",items:"MobileMenu_items__N_NHj",item:"MobileMenu_item__iN83G",selected:"MobileMenu_selected__Z1kQJ",submenu:"MobileMenu_submenu__eW8zr"}},82299:function(e){e.exports={notice:"UpdateNotice_notice__vSRjT",message:"UpdateNotice_message__ntCR8",buttons:"UpdateNotice_buttons__F6euy"}},35177:function(e){e.exports={menu:"ProfileButton_menu__NQdVL",item:"ProfileButton_item__FBiu1"}},51327:function(e){e.exports={layout:"AppLayout_layout__8Fgjq",nav:"AppLayout_nav__Bmoe1",body:"AppLayout_body__pAojL"}},52963:function(e){e.exports={navbar:"NavBar_navbar__1L4iC",left:"NavBar_left__xjgkC",right:"NavBar_right__G2alC",logo:"NavBar_logo__0W9iy",links:"NavBar_links__Sh5Fe",selected:"NavBar_selected__jgveb",actions:"NavBar_actions__CpMkm",mobile:"NavBar_mobile__NlFK6"}}},function(e){e.O(0,[678,885,668,762,249,664,757,67,741,647,101,774,888,179],function(){return e(e.s=54259)}),_N_E=e.O()}]);