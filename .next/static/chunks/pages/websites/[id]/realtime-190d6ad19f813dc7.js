(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{81140:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/websites/[id]/realtime",function(){return n(73615)}])},98776:function(e,t,n){"use strict";var r=n(85893),s=n(94184),l=n.n(s),i=n(27110),a=n.n(i),c=n(44085);t.Z=function(e){let{message:t,className:n}=e,{formatMessage:s,messages:i}=(0,c.Z)();return(0,r.jsx)("div",{className:l()(a().container,n),children:t||s(i.noDataAvailable)})}},44289:function(e,t,n){"use strict";var r=n(85893),s=n(29120);t.Z=function(e){let{items:t,selectedKey:n,onSelect:l}=e;return(0,r.jsx)(s.DL,{justifyContent:"center",children:(0,r.jsx)(s.hE,{items:t,selectedKey:n,onSelect:l,children:e=>{let{key:t,label:n}=e;return(0,r.jsx)(s.zx,{children:n},t)}})})}},66531:function(e,t,n){"use strict";var r=n(85893),s=n(67294),l=n(29120),i=n(81109),a=n.n(i);t.Z=function(e){let{children:t}=e,[n,i]=(0,s.useState)({x:-1e3,y:-1e3});return(0,s.useEffect)(()=>{let e=e=>{i({x:e.clientX,y:e.clientY})};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[]),(0,r.jsx)(l.u,{className:a().tooltip,style:{left:n.x,top:n.y},children:t})}},69465:function(e,t,n){"use strict";var r=n(85893),s=n(67294),l=n(11163),i=n(57172),a=n(94184),c=n.n(a),o=n(16765),u=n(66531),d=n(73865),h=n(53353),m=n(81235),x=n(91998),_=n(29163),v=n(68867),f=n(29256),j=n.n(f);t.Z=function(e){let{data:t,className:n}=e,{basePath:a}=(0,l.useRouter)(),[f,p]=(0,s.useState)(),{theme:b,colors:g}=(0,h.Z)(),{locale:N}=(0,x.Z)(),y=(0,m.Z)(N),w=(0,s.useMemo)(()=>t?(0,v.fr)(t):[],[t]);return(0,r.jsxs)("div",{className:c()(j().container,n),"data-tip":"","data-for":"world-map-tooltip",children:[(0,r.jsx)(i.ComposableMap,{projection:"geoMercator",children:(0,r.jsx)(i.ZoomableGroup,{zoom:.8,minZoom:.7,center:[0,40],children:(0,r.jsx)(i.Geographies,{geography:"".concat(a).concat(d.Cu),children:e=>{let{geographies:t}=e;return t.map(e=>{let t=d.kx[e.id];return(0,r.jsx)(i.Geography,{geography:e,fill:function(e){if("AQ"===e)return;let t=null==w?void 0:w.find(t=>{let{x:n}=t;return n===e});return t?(0,o.Vi)(g.map.baseColor)["light"===b?"lighten":"darken"](.4*(1-t.z/100)).toHex():g.map.fillColor}(t),stroke:g.map.strokeColor,opacity:"AQ"===t?0:1,style:{default:{outline:"none"},hover:{outline:"none",fill:g.map.hoverColor},pressed:{outline:"none"}},onMouseOver:()=>(function(e){if("AQ"===e)return;let t=null==w?void 0:w.find(t=>{let{x:n}=t;return n===e});p("".concat(y[e],": ").concat((0,_.mu)((null==t?void 0:t.y)||0)," visitors"))})(t),onMouseOut:()=>p(null)},e.rsmKey)})}})})}),f&&(0,r.jsx)(u.Z,{children:f})]})}},16822:function(e,t,n){"use strict";n.d(t,{Z:function(){return U}});var r=n(85893),s=n(29120),l=n(9008),i=n.n(l),a=n(41664),c=n.n(a),o=n(11163),u=n(94184),d=n.n(u),h=n(43756),m=n(80483),x=n(52438),_=n(44085),v=n(18927),f=n(35177),j=n.n(f),p=n(91998),b=n(83454),g=function(){let{formatMessage:e,labels:t}=(0,_.Z)(),{user:n}=(0,v.Z)(),l=(0,o.useRouter)(),{dir:i}=(0,p.Z)(),a=!!b.env.cloudMode;return(0,r.jsxs)(s.qh,{children:[(0,r.jsxs)(s.zx,{variant:"quiet",children:[(0,r.jsx)(s.JO,{children:(0,r.jsx)(h.Z.Profile,{})}),(0,r.jsx)(s.JO,{size:"sm",children:(0,r.jsx)(h.Z.ChevronDown,{})})]}),(0,r.jsx)(s.GI,{position:"bottom",alignment:"rtl"===i?"start":"end",children:(0,r.jsxs)(s.v2,{variant:"popup",onSelect:e=>{"profile"===e&&l.push("/settings/profile"),"logout"===e&&l.push("/logout")},className:j().menu,children:[(0,r.jsx)(s.ck,{className:j().item,children:(0,r.jsx)(s.xv,{children:n.username})},"user"),(0,r.jsxs)(s.ck,{className:j().item,divider:!0,children:[(0,r.jsx)(s.JO,{children:(0,r.jsx)(h.Z.User,{})}),(0,r.jsx)(s.xv,{children:e(t.profile)})]},"profile"),!a&&(0,r.jsxs)(s.ck,{className:j().item,children:[(0,r.jsx)(s.JO,{children:(0,r.jsx)(h.Z.Logout,{})}),(0,r.jsx)(s.xv,{children:e(t.logout)})]},"logout")]})})]})},N=n(67294),y=n(73935),w=n(93766),Z=n.n(w),k=function(e){let{items:t=[],onClose:n}=e,{pathname:s}=(0,o.useRouter)(),l=e=>{let{items:t,className:i}=e;return(0,r.jsx)("div",{className:d()(Z().items,i),children:t.map(e=>{let{label:t,url:i,children:a}=e,o=s.startsWith(i);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{href:i,className:d()(Z().item,{[Z().selected]:o}),onClick:n,children:t},i),a&&(0,r.jsx)(l,{items:a,className:Z().submenu})]})})})};return(0,y.createPortal)((0,r.jsx)("div",{className:d()(Z().menu),children:(0,r.jsx)(l,{items:t})}),document.body)},C=n(83454),M=function(){let{formatMessage:e,labels:t}=(0,_.Z)(),[n,l]=(0,N.useState)(!1),i=!!C.env.cloudMode,a=[{label:e(t.dashboard),url:"/dashboard"},!i&&{label:e(t.settings),url:"/settings",children:[{label:e(t.websites),url:"/settings/websites"},{label:e(t.teams),url:"/settings/teams"},{label:e(t.users),url:"/settings/users"},{label:e(t.profile),url:"/settings/profile"}]},i&&{label:e(t.profile),url:"/settings/profile"},!i&&{label:e(t.logout),url:"/logout"}].filter(e=>e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.zx,{variant:"quiet",onClick:()=>l(e=>!e),children:(0,r.jsx)(s.JO,{children:n?(0,r.jsx)(h.Z.Close,{}):(0,r.jsx)(h.Z.Menu,{})})}),n&&(0,r.jsx)(k,{items:a,onClose:()=>l(!1)})]})},L=n(52963),R=n.n(L),D=function(){let{pathname:e}=(0,o.useRouter)(),{formatMessage:t,labels:n}=(0,_.Z)(),l=[{label:t(n.dashboard),url:"/dashboard"},{label:t(n.websites),url:"/websites"},{label:t(n.reports),url:"/reports"},{label:t(n.settings),url:"/settings"}].filter(e=>e);return(0,r.jsx)("div",{className:d()(R().navbar),children:(0,r.jsxs)(s.X2,{children:[(0,r.jsxs)(s.sg,{className:R().left,children:[(0,r.jsxs)("div",{className:R().logo,children:[(0,r.jsx)(s.JO,{size:"lg",children:(0,r.jsx)(h.Z.Logo,{})}),(0,r.jsx)(s.xv,{className:R().text,children:"umami"})]}),(0,r.jsx)("div",{className:R().links,children:l.map(t=>{let{url:n,label:l}=t;return(0,r.jsx)(c(),{href:n,className:d()({[R().selected]:e.startsWith(n)}),children:(0,r.jsx)(s.xv,{children:l})},n)})})]}),(0,r.jsxs)(s.sg,{className:R().right,children:[(0,r.jsxs)("div",{className:R().actions,children:[(0,r.jsx)(m.Z,{}),(0,r.jsx)(x.Z,{}),(0,r.jsx)(g,{})]}),(0,r.jsx)("div",{className:R().mobile,children:(0,r.jsx)(M,{})})]})]})})},S=n(32955),P=n(64529),T=n(12902),O=n(81249),q=n.n(O),E=n(73865);let F={current:E.we,latest:null,hasUpdate:!1,checked:!1,releaseUrl:null},z=(0,P.Ue)(()=>({...F}));async function A(){let{current:e}=z.getState(),t=await fetch("".concat(E.nI,"?v=").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.ok?e.json():null);t&&z.setState((0,T.Uy)(n=>{let{latest:r,url:s}=t,l=(0,S.rV)(E.aC),i=!!(r&&(null==l?void 0:l.version)!==r&&q().gt(r,e));return n.current=e,n.latest=r,n.hasUpdate=i,n.checked=!0,n.releaseUrl=s,n}))}var H=n(82299),B=n.n(H),W=function(e){let{user:t,config:n}=e,{formatMessage:l,labels:i,messages:a}=(0,_.Z)(),{latest:c,checked:u,hasUpdate:d,releaseUrl:h}=z(),{pathname:m}=(0,o.useRouter)(),[x,v]=(0,N.useState)(u),f=(null==t?void 0:t.isAdmin)&&!(null==n?void 0:n.updatesDisabled)&&!(null==n?void 0:n.cloudMode)&&!m.includes("/share/")&&!x,j=(0,N.useCallback)(()=>{(0,S.LS)(E.aC,{version:c,time:Date.now()})},[c]);return((0,N.useEffect)(()=>{f&&A()},[f]),f&&d)?(0,y.createPortal)((0,r.jsxs)(s.X2,{className:B().notice,children:[(0,r.jsx)(s.sg,{variant:"two",className:B().message,children:l(a.newVersionAvailable,{version:"v".concat(c)})}),(0,r.jsxs)(s.sg,{className:B().buttons,children:[(0,r.jsx)(s.zx,{variant:"primary",onClick:function(){j(),v(!0),open(h||E.Bv,"_blank")},children:l(i.viewDetails)}),(0,r.jsx)(s.zx,{onClick:function(){j(),v(!0)},children:l(i.dismiss)})]})]}),document.body):null},G=n(24474),I=n(51327),K=n.n(I),U=function(e){let{title:t,children:n}=e,{user:l}=(0,G.Gb)(),a=(0,G.ZR)();return!l||!a||(null==a?void 0:a.uiDisabled)?null:(0,r.jsxs)("div",{className:K().layout,children:[(0,r.jsx)(W,{user:l,config:a}),(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:t?"".concat(t," | umami"):"umami"})}),(0,r.jsx)("nav",{className:K().nav,children:(0,r.jsx)(D,{})}),(0,r.jsx)("main",{className:K().body,children:(0,r.jsx)(s.W2,{children:n})})]})}},77727:function(e,t,n){"use strict";n.d(t,{C:function(){return u},J:function(){return o}});var r=n(85893),s=n(29120),l=n(94184),i=n.n(l),a=n(35252),c=n.n(a);function o(e){let{className:t,...n}=e;return(0,r.jsx)(s.X2,{...n,className:i()(c().row,t)})}function u(e){let{className:t,...n}=e;return(0,r.jsx)(s.sg,{...n,className:i()(c().col,t)})}},70790:function(e,t,n){"use strict";var r=n(85893),s=n(94184),l=n.n(s),i=n(29120),a=n(44085),c=n(84325),o=n.n(c);t.Z=function(e){let{className:t,error:n,loading:s,children:c}=e,{formatMessage:u,messages:d}=(0,a.Z)();return n?(0,r.jsx)(i.jL,{variant:"error",children:u(d.error)}):s?(0,r.jsx)(i.gb,{icon:"spinner",size:"xl",position:"page"}):(0,r.jsx)("div",{className:l()(o().page,t),children:c})}},92754:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(85893),s=n(67294),l=n(29120),i=n(94184),a=n.n(i),c=n(9085),o=n(66531),u=n(16765),d=n(91998),h=n(43168),m=n(77668),x=n.n(m),_=function(e){var t;let{chart:n}=e,{locale:i}=(0,d.Z)(),c=(0,h.Z)(),o=e=>{let t=n.getDatasetMeta(e);t.hidden=null===t.hidden?!n.data.datasets[e].hidden:null,n.update(),c()};return((0,s.useEffect)(()=>{c()},[i,c]),null==n?void 0:null===(t=n.legend)||void 0===t?void 0:t.legendItems.find(e=>{let{text:t}=e;return t}))?(0,r.jsx)("div",{className:x().legend,children:n.legend.legendItems.map(e=>{let{text:t,fillStyle:n,datasetIndex:s,hidden:c}=e,d=(0,u.Vi)(n);return(0,r.jsx)("div",{className:a()(x().label,{[x().hidden]:c}),onClick:()=>o(s),children:(0,r.jsx)(l.KT,{color:d.alpha(d.alpha()+.2).toHex(),children:(0,r.jsx)("span",{className:i,children:t})})},t)})}):null},v=n(53353),f=n(73865),j=n(7246),p=n(1535),b=n.n(p),g=function(e){let{datasets:t,unit:n,animationDuration:i=f._F,stacked:u=!1,loading:h=!1,renderXLabel:m,renderYLabel:x,XAxisType:p="time",YAxisType:g="linear",renderTooltipPopup:N,onCreate:y,onUpdate:w,className:Z}=e,k=(0,s.useRef)(),C=(0,s.useRef)(null),[M,L]=(0,s.useState)(null),{locale:R}=(0,d.Z)(),{theme:D,colors:S}=(0,v.Z)(),P=(0,s.useCallback)(()=>({responsive:!0,maintainAspectRatio:!1,animation:{duration:i,resize:{duration:0},active:{duration:0}},plugins:{legend:{display:!1},tooltip:{enabled:!1,external:N?N.bind(null,L):void 0}},scales:{x:{type:p,stacked:!0,time:{unit:n},grid:{display:!1},border:{color:S.chart.line},ticks:{color:S.chart.text,autoSkip:!1,maxRotation:0,callback:m}},y:{type:g,min:0,beginAtZero:!0,stacked:u,grid:{color:S.chart.line},border:{color:S.chart.line},ticks:{color:S.text,callback:x||j.F$}}}}),[i,N,m,p,g,u,S,n,R]),T=()=>{c.ZP.defaults.font.family="Inter";let e=P();C.current=new c.ZP(k.current,{type:"bar",data:{datasets:t},options:e}),null==y||y(C.current)},O=()=>{L(null),t.forEach((e,t)=>{C.current.data.datasets[t].data=e.data,C.current.data.datasets[t].label=e.label}),C.current.options=P(),null==w||w(C.current),C.current.update()};return(0,s.useEffect)(()=>{t&&(C.current?O():T())},[t,n,D,i,R]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:a()(b().chart,Z),children:[h&&(0,r.jsx)(l.gb,{position:"page",icon:"dots"}),(0,r.jsx)("canvas",{ref:k})]}),(0,r.jsx)(_,{chart:C.current}),M&&(0,r.jsx)(o.Z,{children:(0,r.jsx)("div",{className:b().tooltip,children:M})})]})}},55046:function(e,t,n){"use strict";var r=n(85893),s=n(67294),l=n(29645),i=n(49821),a=n(69926),c=n(94184),o=n.n(c),u=n(98776),d=n(29163),h=n(44085),m=n(18709),x=n.n(m);let _=e=>{var t;let{label:n,value:s=0,percent:l,animate:i,format:c,onClick:o,showPercentage:u=!0}=e,d=(0,a.q_)({width:l,y:s,from:{width:0,y:0},config:i?a.vc.default:{duration:0}});return(0,r.jsxs)("div",{className:x().row,children:[(0,r.jsx)("div",{className:x().label,children:n}),(0,r.jsx)("div",{className:x().value,onClick:o,children:(0,r.jsx)(a.q.div,{className:x().value,children:null===(t=d.y)||void 0===t?void 0:t.to(c)})}),u&&(0,r.jsxs)("div",{className:x().percent,children:[(0,r.jsx)(a.q.div,{className:x().bar,style:{width:d.width.to(e=>"".concat(e,"%"))}}),(0,r.jsx)(a.q.span,{className:x().percentValue,children:d.width.to(e=>{var t;return"".concat(null==e?void 0:null===(t=e.toFixed)||void 0===t?void 0:t.call(e,0),"%")})})]})]})};t.Z=function(e){let{data:t=[],title:n,metric:a,className:c,renderLabel:m,animate:v=!0,virtualize:f=!1,showPercentage:j=!0}=e,{formatMessage:p,labels:b}=(0,h.Z)(),[g,N]=(0,l.Z)(),[y,w]=(0,s.useState)(!0),Z=y?d.mu:d.uf,k=()=>w(e=>!e),C=e=>{let{x:t,y:n,z:s}=e;return(0,r.jsx)(_,{label:m?m(e):null!=t?t:p(b.unknown),value:n,percent:s,animate:v&&!f,format:Z,onClick:k,showPercentage:j},t)};return(0,r.jsxs)("div",{className:o()(x().table,c),children:[(0,r.jsxs)("div",{className:x().header,children:[(0,r.jsx)("div",{className:x().title,children:n}),(0,r.jsx)("div",{className:x().metric,onClick:k,children:a})]}),(0,r.jsxs)("div",{ref:g,className:x().body,children:[(null==t?void 0:t.length)===0&&(0,r.jsx)(u.Z,{}),f&&t.length>0?(0,r.jsx)(i.t7,{height:N.height,itemCount:t.length,itemSize:30,children:e=>{let{index:n,style:s}=e;return(0,r.jsx)("div",{style:s,children:C(t[n])})}}):t.map(e=>C(e))]})]})}},20495:function(e,t,n){"use strict";var r=n(85893),s=n(94184),l=n.n(s),i=n(69926),a=n(29163),c=n(32915),o=n.n(c);t.Z=e=>{let{value:t=0,change:n=0,label:s,reverseColors:c=!1,format:u=a.uf,hideComparison:d=!1,className:h}=e,m=(0,i.q_)({x:Number(t)||0,from:{x:0}}),x=(0,i.q_)({x:Number(n)||0,from:{x:0}});return(0,r.jsxs)("div",{className:l()(o().card,h),children:[(0,r.jsx)(i.q.div,{className:o().value,children:m.x.to(e=>u(e))}),(0,r.jsxs)("div",{className:o().label,children:[s,0!=~~n&&!d&&(0,r.jsx)(i.q.span,{className:l()(o().change,{[o().positive]:n*(c?-1:1)>=0,[o().negative]:n*(c?-1:1)<0,[o().plusSign]:n>0}),children:x.x.to(e=>u(e))})]})]})}},35702:function(e,t,n){"use strict";var r=n(67294),s=n(92754),l=n(24474),i=n(7246);t.Z=function(e){let{websiteId:t,data:n,unit:a,loading:c,...o}=e,{formatMessage:u,labels:d}=(0,l.y_)(),{colors:h}=(0,l.Fg)(),{locale:m}=(0,l.bU)(),x=(0,r.useMemo)(()=>n?[{label:u(d.uniqueVisitors),data:n.sessions,borderWidth:1,...h.chart.visitors},{label:u(d.pageViews),data:n.pageviews,borderWidth:1,...h.chart.views}]:[],[n,h,u,d]);return(0,r.createElement)(s.Z,{...o,key:t,datasets:x,unit:a,loading:c,renderXLabel:(0,i.oq)(a,m),renderTooltipPopup:(0,i.zK)(a,m)})}},21466:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(85893),s=n(94184),l=n.n(s),i=n(29120),a=n(41664),c=n.n(a),o=n(11163),u=n(165),d=n.n(u),h=function(e){let{domain:t,...n}=e,s=t?function(e){let t=e.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:/\n?=]+)/im);return t&&t.length>1?t[1]:null}(t):null;return s?(0,r.jsx)("img",{className:d().favicon,src:"https://icons.duckduckgo.com/ip3/".concat(s,".ico"),height:"16",alt:"",...n}):null},m=n(67294),x=n(35338),_=n(44085),v=n(1707),f=n.n(v),j=function(e){let{websiteId:t,value:n,refetchInterval:s=6e4}=e,{formatMessage:l,messages:a}=(0,_.Z)(),{get:c,useQuery:o}=(0,x.Z)(),{data:u}=o(["websites:active",t],()=>c("/websites/".concat(t,"/active")),{refetchInterval:s,enabled:!!t}),d=(0,m.useMemo)(()=>{if(t){var e;return(null==u?void 0:null===(e=u[0])||void 0===e?void 0:e.x)||0}return void 0!==n?n:0},[u,n,t]);return 0===d?null:(0,r.jsx)(i.KT,{className:f().container,variant:"success",children:(0,r.jsx)("div",{className:f().text,children:l(a.activeUsers,{x:d})})})},p=n(43756),b=n(24474),g=n(41150),N=n.n(g),y=function(e){let{websiteId:t,showLinks:n=!0,children:s}=e,{formatMessage:a,labels:u}=(0,b.y_)(),{pathname:d}=(0,o.useRouter)(),{data:m}=(0,b.jG)(t),{name:x,domain:_}=m||{},v=[{label:a(u.overview),icon:(0,r.jsx)(p.Z.Overview,{}),path:""},{label:a(u.realtime),icon:(0,r.jsx)(p.Z.Clock,{}),path:"/realtime"},{label:a(u.reports),icon:(0,r.jsx)(p.Z.Reports,{}),path:"/reports"},{label:a(u.eventData),icon:(0,r.jsx)(p.Z.Nodes,{}),path:"/event-data"}];return(0,r.jsxs)(i.X2,{className:N().header,justifyContent:"center",children:[(0,r.jsxs)(i.sg,{className:N().title,variant:"two",children:[(0,r.jsx)(h,{domain:_}),(0,r.jsx)(i.xv,{children:x}),(0,r.jsx)(j,{websiteId:t})]}),(0,r.jsxs)(i.sg,{className:N().actions,variant:"two",children:[n&&(0,r.jsx)("div",{className:N().links,children:v.map(e=>{let{label:n,icon:s,path:a}=e,o=a?d.endsWith(a):"/websites/[id]"===d;return(0,r.jsx)(c(),{href:"/websites/".concat(t).concat(a),shallow:!0,children:(0,r.jsxs)(i.zx,{variant:"quiet",className:l()({[N().selected]:o}),children:[(0,r.jsx)(i.JO,{className:N().icon,children:s}),(0,r.jsx)(i.xv,{className:N().label,children:n})]})},n)})}),s]})]})}},7246:function(e,t,n){"use strict";n.d(t,{F$:function(){return a},oq:function(){return c},zK:function(){return o}});var r=n(85893),s=n(29120),l=n(91534),i=n(29163);function a(e){return+e>1e3?(0,i.mu)(e):e}function c(e,t){return(n,r,s)=>{let i=new Date(s[r].value);switch(e){case"minute":return(0,l.p6)(i,"h:mm",t);case"hour":return(0,l.p6)(i,"p",t);case"day":return(0,l.p6)(i,"MMM d",t);case"month":return(0,l.p6)(i,"MMM",t);case"year":return(0,l.p6)(i,"YYY",t);default:return n}}}function o(e,t){return(n,a)=>{var c;let{opacity:o,labelColors:u,dataPoints:d}=a.tooltip;if(!(null==d?void 0:d.length)||!o){n(null);return}n((0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,l.p6)(new Date(d[0].raw.x),{millisecond:"T",second:"pp",minute:"p",hour:"h:mm aaa - PP",day:"PPPP",week:"PPPP",month:"LLLL yyyy",quarter:"qqq",year:"yyyy"}[e],t)}),(0,r.jsx)("div",{children:(0,r.jsxs)(s.KT,{color:null==u?void 0:null===(c=u[0])||void 0===c?void 0:c.backgroundColor,children:[(0,i.mu)(d[0].raw.y)," ",d[0].dataset.label]})})]}))}}},68867:function(e,t,n){"use strict";n.d(t,{RL:function(){return l},fr:function(){return s},jd:function(){return r}});let r=e=>e.map(e=>e.x?e:null).filter(e=>e),s=e=>{let t=e.reduce((e,t)=>{let{y:n}=t;return e+n},0);return e.map(e=>{let{x:n,y:r,...s}=e;return{x:n,y:r,z:t?r/t*100:0,...s}})},l=e=>{let t=e.reduce((e,t)=>{let{x:n,y:r}=t;try{let t=new URLSearchParams(n);for(let[n,s]of t)e[n]?e[n][s]?e[n][s]+=r:e[n][s]=r:e[n]={[s]:r}}catch(e){}return e},{});return Object.keys(t).flatMap(e=>Object.keys(t[e]).map(n=>({x:"".concat(e,"=").concat(n),p:e,v:n,y:t[e][n]})))}},29163:function(e,t,n){"use strict";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["m","s"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",{days:r,hours:s,minutes:l,seconds:i,ms:a}=function(e){let t=~~(e/86400),n=~~(e/3600)-24*t,r=~~(e/60)-1440*t-60*n;return{days:t,hours:n,minutes:r,seconds:~~e-86400*t-3600*n-60*r,ms:(e-~~e)*1e3}}(e),c="";return(r>0&&-1!==t.indexOf("d")&&(c+="".concat(r,"d").concat(n)),s>0&&-1!==t.indexOf("h")&&(c+="".concat(s,"h").concat(n)),l>0&&-1!==t.indexOf("m")&&(c+="".concat(l,"m").concat(n)),i>0&&-1!==t.indexOf("s")&&(c+="".concat(i,"s").concat(n)),a>0&&-1!==t.indexOf("ms")&&(c+="".concat(a,"ms")),c)?c:"0".concat(t[t.length-1])}function s(e){return Number(e).toFixed(0)}function l(e){let t=Number(e);return t>=1e6?"".concat((t/1e6).toFixed(1),"m"):t>=1e5?"".concat((t/1e3).toFixed(0),"k"):t>=1e4?"".concat((t/1e3).toFixed(1),"k"):t>=1e3?"".concat((t/1e3).toFixed(2),"k"):s(t)}function i(e){if(!e)return"#ffffff";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);let n="#";for(let e=0;e<3;e++)n+=("00"+(t>>8*e&255).toString(16)).slice(-2);return n}n.d(t,{mu:function(){return l},u_:function(){return i},uf:function(){return s},vM:function(){return r}})},73615:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ei}});var r=n(85893),s=n(11163),l=n(16822),i=n(67294),a=n(58545),c=n(13882),o=n(83946);function u(e,t){(0,c.Z)(2,arguments);var n=(0,o.Z)(t);return(0,a.Z)(e,-n)}var d=n(18717),h=n(80717),m=n.n(h),x=n(77727),_=n(70790),v=n(42298),f=n(313),j=n(35702),p=n(91534),b=n(73865);function g(e){let t=0,n=[];return null==e||e.reduce((e,r)=>{let{timestamp:s}=r,l=(0,d.Z)(new Date(s));return l.getTime()>t?(e={x:(0,v.Z)(l,"yyyy-LL-dd HH:mm:00"),y:1},n.push(e),t=l.getTime()):e.y+=1,e},{}),n}var N=function(e){let{data:t,unit:n,...s}=e,l=(0,d.Z)(new Date),a=u(l,b.cZ),c=(0,i.useRef)(l),o=(0,i.useMemo)(()=>t?{pageviews:(0,p.QR)(g(t.pageviews),a,l,n),sessions:(0,p.QR)(g(t.visitors),a,l,n)}:{pageviews:[],sessions:[]},[t,a,l,n]),h=(0,i.useMemo)(()=>(0,f.Z)(c.current,l)?(c.current=l,0):b._F,[l]);return(0,r.jsx)(j.Z,{...s,height:200,unit:n,data:o,animationDuration:h})},y=n(69465),w=n(29120),Z=n(49821),k=n(44289),C=n(98776),M=n(91998),L=n(81235),R=n(29163),D=n(32955),S=n(43756),P=n(74420),T=n.n(P),O=n(44085);let q="pageview",E="session",F="event",z={[q]:(0,r.jsx)(S.Z.Eye,{}),[E]:(0,r.jsx)(S.Z.Visitor,{}),[F]:(0,r.jsx)(S.Z.Bolt,{})};var A=function(e){let{data:t,websiteDomain:n}=e,{formatMessage:s,labels:l,messages:a,FormattedMessage:c}=(0,O.Z)(),{locale:o}=(0,M.Z)(),u=(0,L.Z)(o),[d,h]=(0,i.useState)("all"),x=[{label:s(l.all),key:"all"},{label:s(l.views),key:q},{label:s(l.visitors),key:E},{label:s(l.events),key:F}],_=e=>{let{createdAt:t}=e;return(0,p.p6)(new Date(t),"pp",o)},v=e=>{let{id:t,sessionId:n}=e;return(0,R.u_)(n||t)},f=e=>{let{__type:t}=e;return z[t]},j=e=>{let{__type:t,eventName:i,urlPath:o,browser:d,os:h,country:m,device:x}=e;return t===F?(0,r.jsx)(c,{...a.eventLog,values:{event:(0,r.jsx)("b",{children:i||s(l.unknown)}),url:(0,r.jsx)("a",{href:"//".concat(n).concat(o),className:T().link,target:"_blank",rel:"noreferrer noopener",children:o})}}):t===q?(0,r.jsx)("a",{href:"//".concat(n).concat(o),className:T().link,target:"_blank",rel:"noreferrer noopener",children:(0,D.xk)(o)}):t===E?(0,r.jsx)(c,{...a.visitorLog,values:{country:(0,r.jsx)("b",{children:u[m]||s(l.unknown)}),browser:(0,r.jsx)("b",{children:b.An[d]}),os:(0,r.jsx)("b",{children:h}),device:(0,r.jsx)("b",{children:s(l[x]||l.unknown)})}}):void 0},g=(0,i.useMemo)(()=>{if(!t)return[];let{pageviews:e,visitors:n,events:r}=t,s=[...e,...n,...r].sort(m()("createdAt",-1));return"all"!==d?s.filter(e=>{let{__type:t}=e;return t===d}):s},[t,d]);return(0,r.jsxs)("div",{className:T().table,children:[(0,r.jsx)(k.Z,{items:x,selectedKey:d,onSelect:h}),(0,r.jsx)("div",{className:T().header,children:s(l.activityLog)}),(0,r.jsxs)("div",{className:T().body,children:[(null==g?void 0:g.length)===0&&(0,r.jsx)(C.Z,{}),(null==g?void 0:g.length)>0&&(0,r.jsx)(Z.t7,{height:500,itemCount:g.length,itemSize:50,children:e=>{let{index:t,style:n}=e,s=g[t];return(0,r.jsxs)("div",{className:T().row,style:n,children:[(0,r.jsx)("div",{children:(0,r.jsx)(w.KT,{color:v(s)})}),(0,r.jsx)("div",{className:T().time,children:_(s)}),(0,r.jsxs)("div",{className:T().detail,children:[(0,r.jsx)(w.JO,{className:T().icon,children:f(s)}),(0,r.jsx)(w.xv,{children:j(s)})]})]})}})]})]})},H=n(20495),B=n(6901),W=n.n(B),G=function(e){let{data:t={}}=e,{formatMessage:n,labels:s}=(0,O.Z)(),{pageviews:l,visitors:i,events:a,countries:c}=t;return(0,r.jsx)("div",{className:W().header,children:(0,r.jsxs)("div",{className:W().metrics,children:[(0,r.jsx)(H.Z,{className:W().card,label:n(s.views),value:null==l?void 0:l.length,hideComparison:!0}),(0,r.jsx)(H.Z,{className:W().card,label:n(s.visitors),value:null==i?void 0:i.length,hideComparison:!0}),(0,r.jsx)(H.Z,{className:W().card,label:n(s.events),value:null==a?void 0:a.length,hideComparison:!0}),(0,r.jsx)(H.Z,{className:W().card,label:n(s.countries),value:null==c?void 0:c.length,hideComparison:!0})]})})},I=n(68867),K=n(55046),U=function(e){let{websiteDomain:t,data:n={}}=e,{formatMessage:s,labels:l}=(0,O.Z)(),{pageviews:a}=n,[c,o]=(0,i.useState)(b.ut),u=[{label:s(l.referrers),key:b.ut},{label:s(l.pages),key:b.mS}],d=e=>{let{x:n}=e,s=n.startsWith("/")?t:"";return(0,r.jsx)("a",{href:"//".concat(s).concat(n),target:"_blank",rel:"noreferrer noopener",children:n})},[h=[],x=[]]=(0,i.useMemo)(()=>{if(a){let e=(0,I.fr)(a.reduce((e,t)=>{let{referrerDomain:n}=t;if(n){let t=e.find(e=>{let{x:t}=e;return t===n});t?t.y+=1:e.push({x:n,y:1})}return e},[]).sort(m()("y",-1)).slice(0,15)),t=(0,I.fr)(a.reduce((e,t)=>{let{urlPath:n}=t,r=e.find(e=>{let{x:t}=e;return t===n});return r?r.y+=1:e.push({x:n,y:1}),e},[]).sort(m()("y",-1)).slice(0,15));return[e,t]}return[]},[a]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.DL,{justifyContent:"center",children:(0,r.jsx)(w.hE,{items:u,selectedKey:c,onSelect:o,children:e=>{let{key:t,label:n}=e;return(0,r.jsx)(w.zx,{children:n},t)}})}),c===b.ut&&(0,r.jsx)(K.Z,{title:s(l.referrers),metric:s(l.views),renderLabel:d,data:h}),c===b.mS&&(0,r.jsx)(K.Z,{title:s(l.pages),metric:s(l.views),renderLabel:d,data:x})]})},J=n(94184),V=n.n(J),X=n(50737),Q=n.n(X),Y=function(e){let{data:t}=e,{formatMessage:n,labels:l}=(0,O.Z)(),{locale:a}=(0,M.Z)(),c=(0,L.Z)(a),{basePath:o}=(0,s.useRouter)(),u=(0,i.useCallback)(e=>{let{x:t}=e;return(0,r.jsxs)("span",{className:V()(a,Q().row),children:[(0,r.jsx)("img",{src:"".concat(o,"/images/flags/").concat((null==t?void 0:t.toLowerCase())||"xx",".png"),alt:t}),c[t]]})},[c,a,o]);return(0,r.jsx)(K.Z,{title:n(l.countries),metric:n(l.visitors),data:t,renderLabel:u})},$=n(21466),ee=n(35338),et=n(1446),en=n.n(et),er=n(24474);function es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=e.map(e=>{let{__id:t}=e;return t});return e.concat(t.filter(e=>{let{__id:t}=e;return!r.includes(t)})).filter(e=>{let{timestamp:t}=e;return t>=n})}var el=function(e){let{websiteId:t}=e,[n,s]=(0,i.useState)(),{get:l,useQuery:a}=(0,ee.Z)(),{data:c}=(0,er.jG)(t),{data:o,isLoading:h,error:v}=a(["realtime",t],()=>l("/realtime/".concat(t),{startAt:(null==n?void 0:n.timestamp)||0}),{enabled:!!(t&&c),refetchInterval:b.Iq,cache:!1});(0,i.useEffect)(()=>{if(o){let e=u((0,d.Z)(new Date),b.cZ),t=e.getTime();s(e=>({pageviews:es(null==e?void 0:e.pageviews,o.pageviews,t),sessions:es(null==e?void 0:e.sessions,o.sessions,t),events:es(null==e?void 0:e.events,o.events,t),timestamp:o.timestamp}))}},[o]);let f=(0,i.useMemo)(()=>n?(n.countries=(0,I.fr)(n.sessions.reduce((e,t)=>e.find(e=>{let{id:n}=e;return n===t.id})?e:e.concat(t),[]).reduce((e,t)=>{let{country:n}=t;if(n){let t=e.find(e=>{let{x:t}=e;return t===n});t?t.y+=1:e.push({x:n,y:1})}return e},[]).sort(m()("y",-1))),n.visitors=n.sessions.reduce((e,t)=>e.find(e=>{let{id:n}=e;return n===t.id})?e:e.concat(t),[]),n):{pageviews:[],sessions:[],events:[],countries:[],visitors:[]},[n]);return(0,r.jsxs)(_.Z,{loading:h,error:v,children:[(0,r.jsx)($.Z,{websiteId:t}),(0,r.jsx)(G,{websiteId:t,data:n}),(0,r.jsx)(N,{className:en().chart,data:f,unit:"minute"}),(0,r.jsxs)(x.J,{children:[(0,r.jsx)(x.C,{xs:12,sm:12,md:12,lg:4,xl:4,children:(0,r.jsx)(U,{websiteId:t,websiteDomain:null==c?void 0:c.domain,data:f})}),(0,r.jsx)(x.C,{xs:12,sm:12,md:12,lg:8,xl:8,children:(0,r.jsx)(A,{websiteId:t,websiteDomain:null==c?void 0:c.domain,data:f})})]}),(0,r.jsxs)(x.J,{children:[(0,r.jsx)(x.C,{xs:12,lg:4,children:(0,r.jsx)(Y,{data:null==f?void 0:f.countries})}),(0,r.jsx)(x.C,{xs:12,lg:8,children:(0,r.jsx)(y.Z,{data:null==f?void 0:f.countries})})]})]})};function ei(){let e=(0,s.useRouter)(),{id:t}=e.query;return t?(0,r.jsx)(l.Z,{children:(0,r.jsx)(el,{websiteId:t})}):null}},27110:function(e){e.exports={container:"Empty_container__ZKJsF"}},165:function(e){e.exports={favicon:"Favicon_favicon__jjbzI"}},81109:function(e){e.exports={tooltip:"HoverTooltip_tooltip__csrWi"}},93766:function(e){e.exports={menu:"MobileMenu_menu__DO6aZ",items:"MobileMenu_items__N_NHj",item:"MobileMenu_item__iN83G",selected:"MobileMenu_selected__Z1kQJ",submenu:"MobileMenu_submenu__eW8zr"}},82299:function(e){e.exports={notice:"UpdateNotice_notice__vSRjT",message:"UpdateNotice_message__ntCR8",buttons:"UpdateNotice_buttons__F6euy"}},29256:function(e){e.exports={container:"WorldMap_container__oKZys"}},35177:function(e){e.exports={menu:"ProfileButton_menu__NQdVL",item:"ProfileButton_item__FBiu1"}},51327:function(e){e.exports={layout:"AppLayout_layout__8Fgjq",nav:"AppLayout_nav__Bmoe1",body:"AppLayout_body__pAojL"}},35252:function(e){e.exports={col:"Grid_col__Q89rb",row:"Grid_row__EyExf"}},52963:function(e){e.exports={navbar:"NavBar_navbar__1L4iC",left:"NavBar_left__xjgkC",right:"NavBar_right__G2alC",logo:"NavBar_logo__0W9iy",links:"NavBar_links__Sh5Fe",selected:"NavBar_selected__jgveb",actions:"NavBar_actions__CpMkm",mobile:"NavBar_mobile__NlFK6"}},84325:function(e){e.exports={page:"Page_page__xxbhi"}},1707:function(e){e.exports={container:"ActiveUsers_container___JH1q",text:"ActiveUsers_text__9rsD0",value:"ActiveUsers_value__H3uVq"}},1535:function(e){e.exports={chart:"BarChart_chart__EO1Ol",tooltip:"BarChart_tooltip__FWKKp",value:"BarChart_value__D6s2F"}},18709:function(e){e.exports={table:"DataTable_table__N_EPZ",body:"DataTable_body__DhwJ8",header:"DataTable_header__iwjK3",title:"DataTable_title__rsSZa",metric:"DataTable_metric__psVMR",row:"DataTable_row___AB3X",label:"DataTable_label__8iQPt",value:"DataTable_value__1fAS1",percent:"DataTable_percent___cir2",bar:"DataTable_bar__2k9Rb"}},77668:function(e){e.exports={legend:"Legend_legend__h9a1F",label:"Legend_label__HSSWz",hidden:"Legend_hidden__EX6iO"}},32915:function(e){e.exports={card:"MetricCard_card__NX9Nc",value:"MetricCard_value__m2Mhp",label:"MetricCard_label__PQabu",change:"MetricCard_change__DYILr",positive:"MetricCard_positive__9P20B",negative:"MetricCard_negative__eaMcO",plusSign:"MetricCard_plusSign__T6tMd"}},50737:function(e){e.exports={row:"RealtimeCountries_row__hE6pr"}},6901:function(e){e.exports={header:"RealtimeHeader_header___4G_B",metrics:"RealtimeHeader_metrics__alaJN",card:"RealtimeHeader_card__1_Inz"}},74420:function(e){e.exports={table:"RealtimeLog_table__Uw_tM",header:"RealtimeLog_header__C2k_x",row:"RealtimeLog_row__kYHTO",body:"RealtimeLog_body__pE_us",icon:"RealtimeLog_icon__StvcD",time:"RealtimeLog_time__h9AHl",website:"RealtimeLog_website__T7gup",detail:"RealtimeLog_detail__1G1Tj",link:"RealtimeLog_link__H_Qha"}},1446:function(e){e.exports={container:"RealtimePage_container__a_qcz",chart:"RealtimePage_chart__G5IoY",sticky:"RealtimePage_sticky__otxrB"}},41150:function(e){e.exports={header:"WebsiteHeader_header__wK7qo",title:"WebsiteHeader_title__9N6pA",actions:"WebsiteHeader_actions__pG1GW",selected:"WebsiteHeader_selected__dGZmw",links:"WebsiteHeader_links___XsS_",label:"WebsiteHeader_label__jOZTy",icon:"WebsiteHeader_icon__TVV3d"}}},function(e){e.O(0,[678,885,668,762,249,664,757,67,774,888,179],function(){return e(e.s=81140)}),_N_E=e.O()}]);