(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{42699:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(19013),a=n(13882);function i(e,t){(0,a.Z)(2,arguments);var n=(0,s.Z)(e),i=(0,s.Z)(t);return n.getTime()>i.getTime()}},313:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(19013),a=n(13882);function i(e,t){(0,a.Z)(2,arguments);var n=(0,s.Z)(e),i=(0,s.Z)(t);return n.getTime()<i.getTime()}},3151:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(69119),a=n(13882);function i(e,t){(0,a.Z)(2,arguments);var n=(0,s.Z)(e),i=(0,s.Z)(t);return n.getTime()===i.getTime()}},1920:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/websites/[id]/event-data",function(){return n(24581)}])},98776:function(e,t,n){"use strict";var s=n(85893),a=n(94184),i=n.n(a),l=n(27110),r=n.n(l),c=n(44085);t.Z=function(e){let{message:t,className:n}=e,{formatMessage:a,messages:l}=(0,c.Z)();return(0,s.jsx)("div",{className:i()(r().container,n),children:t||a(l.noDataAvailable)})}},16822:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var s=n(85893),a=n(29120),i=n(9008),l=n.n(i),r=n(41664),c=n.n(r),o=n(11163),u=n(94184),d=n.n(u),x=n(43756),h=n(80483),j=n(52438),m=n(44085),_=n(18927),v=n(35177),f=n.n(v),b=n(91998),g=n(83454),p=function(){let{formatMessage:e,labels:t}=(0,m.Z)(),{user:n}=(0,_.Z)(),i=(0,o.useRouter)(),{dir:l}=(0,b.Z)(),r=!!g.env.cloudMode;return(0,s.jsxs)(a.qh,{children:[(0,s.jsxs)(a.zx,{variant:"quiet",children:[(0,s.jsx)(a.JO,{children:(0,s.jsx)(x.Z.Profile,{})}),(0,s.jsx)(a.JO,{size:"sm",children:(0,s.jsx)(x.Z.ChevronDown,{})})]}),(0,s.jsx)(a.GI,{position:"bottom",alignment:"rtl"===l?"start":"end",children:(0,s.jsxs)(a.v2,{variant:"popup",onSelect:e=>{"profile"===e&&i.push("/settings/profile"),"logout"===e&&i.push("/logout")},className:f().menu,children:[(0,s.jsx)(a.ck,{className:f().item,children:(0,s.jsx)(a.xv,{children:n.username})},"user"),(0,s.jsxs)(a.ck,{className:f().item,divider:!0,children:[(0,s.jsx)(a.JO,{children:(0,s.jsx)(x.Z.User,{})}),(0,s.jsx)(a.xv,{children:e(t.profile)})]},"profile"),!r&&(0,s.jsxs)(a.ck,{className:f().item,children:[(0,s.jsx)(a.JO,{children:(0,s.jsx)(x.Z.Logout,{})}),(0,s.jsx)(a.xv,{children:e(t.logout)})]},"logout")]})})]})},N=n(67294),Z=n(73935),w=n(93766),y=n.n(w),C=function(e){let{items:t=[],onClose:n}=e,{pathname:a}=(0,o.useRouter)(),i=e=>{let{items:t,className:l}=e;return(0,s.jsx)("div",{className:d()(y().items,l),children:t.map(e=>{let{label:t,url:l,children:r}=e,o=a.startsWith(l);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c(),{href:l,className:d()(y().item,{[y().selected]:o}),onClick:n,children:t},l),r&&(0,s.jsx)(i,{items:r,className:y().submenu})]})})})};return(0,Z.createPortal)((0,s.jsx)("div",{className:d()(y().menu),children:(0,s.jsx)(i,{items:t})}),document.body)},k=n(83454),M=function(){let{formatMessage:e,labels:t}=(0,m.Z)(),[n,i]=(0,N.useState)(!1),l=!!k.env.cloudMode,r=[{label:e(t.dashboard),url:"/dashboard"},!l&&{label:e(t.settings),url:"/settings",children:[{label:e(t.websites),url:"/settings/websites"},{label:e(t.teams),url:"/settings/teams"},{label:e(t.users),url:"/settings/users"},{label:e(t.profile),url:"/settings/profile"}]},l&&{label:e(t.profile),url:"/settings/profile"},!l&&{label:e(t.logout),url:"/logout"}].filter(e=>e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.zx,{variant:"quiet",onClick:()=>i(e=>!e),children:(0,s.jsx)(a.JO,{children:n?(0,s.jsx)(x.Z.Close,{}):(0,s.jsx)(x.Z.Menu,{})})}),n&&(0,s.jsx)(C,{items:r,onClose:()=>i(!1)})]})},B=n(52963),D=n.n(B),E=function(){let{pathname:e}=(0,o.useRouter)(),{formatMessage:t,labels:n}=(0,m.Z)(),i=[{label:t(n.dashboard),url:"/dashboard"},{label:t(n.websites),url:"/websites"},{label:t(n.reports),url:"/reports"},{label:t(n.settings),url:"/settings"}].filter(e=>e);return(0,s.jsx)("div",{className:d()(D().navbar),children:(0,s.jsxs)(a.X2,{children:[(0,s.jsxs)(a.sg,{className:D().left,children:[(0,s.jsxs)("div",{className:D().logo,children:[(0,s.jsx)(a.JO,{size:"lg",children:(0,s.jsx)(x.Z.Logo,{})}),(0,s.jsx)(a.xv,{className:D().text,children:"umami"})]}),(0,s.jsx)("div",{className:D().links,children:i.map(t=>{let{url:n,label:i}=t;return(0,s.jsx)(c(),{href:n,className:d()({[D().selected]:e.startsWith(n)}),children:(0,s.jsx)(a.xv,{children:i})},n)})})]}),(0,s.jsxs)(a.sg,{className:D().right,children:[(0,s.jsxs)("div",{className:D().actions,children:[(0,s.jsx)(h.Z,{}),(0,s.jsx)(j.Z,{}),(0,s.jsx)(p,{})]}),(0,s.jsx)("div",{className:D().mobile,children:(0,s.jsx)(M,{})})]})]})})},S=n(32955),T=n(64529),z=n(12902),F=n(81249),L=n.n(F),R=n(73865);let A={current:R.we,latest:null,hasUpdate:!1,checked:!1,releaseUrl:null},P=(0,T.Ue)(()=>({...A}));async function U(){let{current:e}=P.getState(),t=await fetch("".concat(R.nI,"?v=").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.ok?e.json():null);t&&P.setState((0,z.Uy)(n=>{let{latest:s,url:a}=t,i=(0,S.rV)(R.aC),l=!!(s&&(null==i?void 0:i.version)!==s&&L().gt(s,e));return n.current=e,n.latest=s,n.hasUpdate=l,n.checked=!0,n.releaseUrl=a,n}))}var O=n(82299),J=n.n(O),q=function(e){let{user:t,config:n}=e,{formatMessage:i,labels:l,messages:r}=(0,m.Z)(),{latest:c,checked:u,hasUpdate:d,releaseUrl:x}=P(),{pathname:h}=(0,o.useRouter)(),[j,_]=(0,N.useState)(u),v=(null==t?void 0:t.isAdmin)&&!(null==n?void 0:n.updatesDisabled)&&!(null==n?void 0:n.cloudMode)&&!h.includes("/share/")&&!j,f=(0,N.useCallback)(()=>{(0,S.LS)(R.aC,{version:c,time:Date.now()})},[c]);return((0,N.useEffect)(()=>{v&&U()},[v]),v&&d)?(0,Z.createPortal)((0,s.jsxs)(a.X2,{className:J().notice,children:[(0,s.jsx)(a.sg,{variant:"two",className:J().message,children:i(r.newVersionAvailable,{version:"v".concat(c)})}),(0,s.jsxs)(a.sg,{className:J().buttons,children:[(0,s.jsx)(a.zx,{variant:"primary",onClick:function(){f(),_(!0),open(x||R.Bv,"_blank")},children:i(l.viewDetails)}),(0,s.jsx)(a.zx,{onClick:function(){f(),_(!0)},children:i(l.dismiss)})]})]}),document.body):null},I=n(24474),H=n(51327),W=n.n(H),G=function(e){let{title:t,children:n}=e,{user:i}=(0,I.Gb)(),r=(0,I.ZR)();return!i||!r||(null==r?void 0:r.uiDisabled)?null:(0,s.jsxs)("div",{className:W().layout,children:[(0,s.jsx)(q,{user:i,config:r}),(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:t?"".concat(t," | umami"):"umami"})}),(0,s.jsx)("nav",{className:W().nav,children:(0,s.jsx)(E,{})}),(0,s.jsx)("main",{className:W().body,children:(0,s.jsx)(a.W2,{children:n})})]})}},70790:function(e,t,n){"use strict";var s=n(85893),a=n(94184),i=n.n(a),l=n(29120),r=n(44085),c=n(84325),o=n.n(c);t.Z=function(e){let{className:t,error:n,loading:a,children:c}=e,{formatMessage:u,messages:d}=(0,r.Z)();return n?(0,s.jsx)(l.jL,{variant:"error",children:u(d.error)}):a?(0,s.jsx)(l.gb,{icon:"spinner",size:"xl",position:"page"}):(0,s.jsx)("div",{className:i()(o().page,t),children:c})}},56754:function(e,t,n){"use strict";var s=n(85893),a=n(94184),i=n.n(a);n(67294);var l=n(74282),r=n.n(l);t.Z=function(e){let{title:t,children:n,className:a}=e;return(0,s.jsxs)("div",{className:i()(r().header,a),children:[t&&(0,s.jsx)("div",{className:r().title,children:t}),(0,s.jsx)("div",{className:r().actions,children:n})]})}},24581:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var s=n(85893),a=n(11163),i=n(16822),l=n(70790),r=n(21466),c=n(29120),o=n(41664),u=n.n(o),d=n(24474),x=n(98776),h=n(73865),j=function(e){let{data:t=[]}=e,{formatMessage:n,labels:a}=(0,d.y_)(),{resolveUrl:i}=(0,d.v$)();return 0===t.length?(0,s.jsx)(x.Z,{}):(0,s.jsxs)(c.R1,{data:t,children:[(0,s.jsx)(c.C4,{name:"eventName",label:n(a.event),children:e=>(0,s.jsx)(u(),{href:i({event:e.eventName}),shallow:!0,children:e.eventName})}),(0,s.jsx)(c.C4,{name:"fieldName",label:n(a.field),children:e=>e.fieldName}),(0,s.jsx)(c.C4,{name:"dataType",label:n(a.type),children:e=>h.D3[e.dataType]}),(0,s.jsx)(c.C4,{name:"total",label:n(a.totalRecords),children:e=>{let{total:t}=e;return t.toLocaleString()}})]})},m=n(43756),_=n(56754),v=function(e){let{data:t=[],event:n}=e,{formatMessage:a,labels:i}=(0,d.y_)(),{resolveUrl:l}=(0,d.v$)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{title:(0,s.jsx)(()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u(),{href:l({event:void 0}),children:(0,s.jsxs)(c.zx,{children:[(0,s.jsx)(c.JO,{rotate:180,children:(0,s.jsx)(m.Z.ArrowRight,{})}),(0,s.jsx)(c.xv,{children:a(i.back)})]})}),(0,s.jsx)(c.xv,{children:n})]}),{})}),t.length<=0&&(0,s.jsx)(x.Z,{}),t.length>0&&(0,s.jsxs)(c.R1,{data:t,children:[(0,s.jsx)(c.C4,{name:"fieldName",label:a(i.field)}),(0,s.jsx)(c.C4,{name:"dataType",label:a(i.type),children:e=>h.D3[e.dataType]}),(0,s.jsx)(c.C4,{name:"fieldValue",label:a(i.value)}),(0,s.jsx)(c.C4,{name:"total",label:a(i.totalRecords),width:"200px",children:e=>{let{total:t}=e;return t.toLocaleString()}})]})]})},f=n(20495),b=n(44085),g=n(98757),p=n(20691),N=n(87991),Z=n.n(N);function w(e){let{websiteId:t}=e,{formatMessage:n,labels:a}=(0,b.Z)(),{get:i,useQuery:l}=(0,d.h_)(),[r]=(0,d.Sy)(t),{startDate:o,endDate:u,modified:x}=r,{data:h,error:j,isLoading:m,isFetched:_}=l(["event-data:stats",{websiteId:t,startDate:o,endDate:u,modified:x}],()=>i("/event-data/stats",{websiteId:t,startAt:+o,endAt:+u}));return(0,s.jsxs)(c.X2,{className:Z().row,children:[(0,s.jsx)(c.sg,{defaultSize:12,xl:8,children:(0,s.jsx)(p.Z,{isLoading:m,isFetched:_,error:j,children:!j&&_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{className:Z().card,label:n(a.events),value:null==h?void 0:h.events}),(0,s.jsx)(f.Z,{className:Z().card,label:n(a.fields),value:null==h?void 0:h.fields}),(0,s.jsx)(f.Z,{className:Z().card,label:n(a.totalRecords),value:null==h?void 0:h.records})]})})}),(0,s.jsx)(c.sg,{defaultSize:12,xl:4,children:(0,s.jsx)("div",{className:Z().actions,children:(0,s.jsx)(g.Z,{websiteId:t})})})]})}var y=n(74137),C=n.n(y);function k(e){let{websiteId:t}=e,{query:{event:n}}=(0,d.v$)(),{data:a,isLoading:i}=function(e,t){let[n]=(0,d.Sy)(e),{startDate:s,endDate:a}=n,{get:i,useQuery:l}=(0,d.h_)(),{data:r,error:c,isLoading:o}=l(["event-data:events",{websiteId:e,startDate:s,endDate:a,event:t}],()=>i("/event-data/events",{websiteId:e,startAt:+s,endAt:+a,event:t}),{enabled:!!(e&&s&&a)});return{data:r,error:c,isLoading:o}}(t,n);return(0,s.jsxs)(c.DL,{className:C().container,direction:"column",gap:20,children:[(0,s.jsx)(w,{websiteId:t}),!n&&(0,s.jsx)(j,{data:a}),i&&(0,s.jsx)(c.gb,{position:"page"}),n&&a&&(0,s.jsx)(v,{event:n,data:a})]})}function M(e){let{websiteId:t}=e;return(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(r.Z,{websiteId:t}),(0,s.jsx)(k,{websiteId:t})]})}function B(){let{formatMessage:e,labels:t}=(0,b.Z)(),n=(0,a.useRouter)(),{id:l}=n.query;return l?(0,s.jsx)(i.Z,{title:e(t.websites),children:(0,s.jsx)(M,{websiteId:l})}):null}},27110:function(e){e.exports={container:"Empty_container__ZKJsF"}},93766:function(e){e.exports={menu:"MobileMenu_menu__DO6aZ",items:"MobileMenu_items__N_NHj",item:"MobileMenu_item__iN83G",selected:"MobileMenu_selected__Z1kQJ",submenu:"MobileMenu_submenu__eW8zr"}},82299:function(e){e.exports={notice:"UpdateNotice_notice__vSRjT",message:"UpdateNotice_message__ntCR8",buttons:"UpdateNotice_buttons__F6euy"}},35177:function(e){e.exports={menu:"ProfileButton_menu__NQdVL",item:"ProfileButton_item__FBiu1"}},51327:function(e){e.exports={layout:"AppLayout_layout__8Fgjq",nav:"AppLayout_nav__Bmoe1",body:"AppLayout_body__pAojL"}},52963:function(e){e.exports={navbar:"NavBar_navbar__1L4iC",left:"NavBar_left__xjgkC",right:"NavBar_right__G2alC",logo:"NavBar_logo__0W9iy",links:"NavBar_links__Sh5Fe",selected:"NavBar_selected__jgveb",actions:"NavBar_actions__CpMkm",mobile:"NavBar_mobile__NlFK6"}},84325:function(e){e.exports={page:"Page_page__xxbhi"}},74282:function(e){e.exports={header:"PageHeader_header__8CvHt",title:"PageHeader_title__m8eFY",actions:"PageHeader_actions__6l2hP"}},87991:function(e){e.exports={container:"EventDataMetricsBar_container__hT9bj",metrics:"EventDataMetricsBar_metrics__qo9NB",actions:"EventDataMetricsBar_actions__HUfFz",bar:"EventDataMetricsBar_bar__wCkPo",card:"EventDataMetricsBar_card__64S5l",row:"EventDataMetricsBar_row__zumEz"}},74137:function(e){e.exports={container:"WebsiteEventData_container__dQKcM"}}},function(e){e.O(0,[678,885,668,762,249,67,741,774,888,179],function(){return e(e.s=1920)}),_N_E=e.O()}]);