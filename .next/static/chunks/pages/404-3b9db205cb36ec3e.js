(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[197],{20394:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/404",function(){return n(63163)}])},16822:function(e,s,n){"use strict";n.d(s,{Z:function(){return I}});var t=n(85893),l=n(29120),i=n(9008),r=n.n(i),a=n(41664),o=n.n(a),c=n(11163),u=n(94184),d=n.n(u),x=n(43756),h=n(80483),m=n(52438),_=n(44085),j=n(18927),v=n(35177),b=n.n(v),f=n(91998),p=n(83454),g=function(){let{formatMessage:e,labels:s}=(0,_.Z)(),{user:n}=(0,j.Z)(),i=(0,c.useRouter)(),{dir:r}=(0,f.Z)(),a=!!p.env.cloudMode;return(0,t.jsxs)(l.qh,{children:[(0,t.jsxs)(l.zx,{variant:"quiet",children:[(0,t.jsx)(l.JO,{children:(0,t.jsx)(x.Z.Profile,{})}),(0,t.jsx)(l.JO,{size:"sm",children:(0,t.jsx)(x.Z.ChevronDown,{})})]}),(0,t.jsx)(l.GI,{position:"bottom",alignment:"rtl"===r?"start":"end",children:(0,t.jsxs)(l.v2,{variant:"popup",onSelect:e=>{"profile"===e&&i.push("/settings/profile"),"logout"===e&&i.push("/logout")},className:b().menu,children:[(0,t.jsx)(l.ck,{className:b().item,children:(0,t.jsx)(l.xv,{children:n.username})},"user"),(0,t.jsxs)(l.ck,{className:b().item,divider:!0,children:[(0,t.jsx)(l.JO,{children:(0,t.jsx)(x.Z.User,{})}),(0,t.jsx)(l.xv,{children:e(s.profile)})]},"profile"),!a&&(0,t.jsxs)(l.ck,{className:b().item,children:[(0,t.jsx)(l.JO,{children:(0,t.jsx)(x.Z.Logout,{})}),(0,t.jsx)(l.xv,{children:e(s.logout)})]},"logout")]})})]})},N=n(67294),k=n(73935),Z=n(93766),y=n.n(Z),C=function(e){let{items:s=[],onClose:n}=e,{pathname:l}=(0,c.useRouter)(),i=e=>{let{items:s,className:r}=e;return(0,t.jsx)("div",{className:d()(y().items,r),children:s.map(e=>{let{label:s,url:r,children:a}=e,c=l.startsWith(r);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o(),{href:r,className:d()(y().item,{[y().selected]:c}),onClick:n,children:s},r),a&&(0,t.jsx)(i,{items:a,className:y().submenu})]})})})};return(0,k.createPortal)((0,t.jsx)("div",{className:d()(y().menu),children:(0,t.jsx)(i,{items:s})}),document.body)},w=n(83454),M=function(){let{formatMessage:e,labels:s}=(0,_.Z)(),[n,i]=(0,N.useState)(!1),r=!!w.env.cloudMode,a=[{label:e(s.dashboard),url:"/dashboard"},!r&&{label:e(s.settings),url:"/settings",children:[{label:e(s.websites),url:"/settings/websites"},{label:e(s.teams),url:"/settings/teams"},{label:e(s.users),url:"/settings/users"},{label:e(s.profile),url:"/settings/profile"}]},r&&{label:e(s.profile),url:"/settings/profile"},!r&&{label:e(s.logout),url:"/logout"}].filter(e=>e);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.zx,{variant:"quiet",onClick:()=>i(e=>!e),children:(0,t.jsx)(l.JO,{children:n?(0,t.jsx)(x.Z.Close,{}):(0,t.jsx)(x.Z.Menu,{})})}),n&&(0,t.jsx)(C,{items:a,onClose:()=>i(!1)})]})},B=n(52963),L=n.n(B),U=function(){let{pathname:e}=(0,c.useRouter)(),{formatMessage:s,labels:n}=(0,_.Z)(),i=[{label:s(n.dashboard),url:"/dashboard"},{label:s(n.websites),url:"/websites"},{label:s(n.reports),url:"/reports"},{label:s(n.settings),url:"/settings"}].filter(e=>e);return(0,t.jsx)("div",{className:d()(L().navbar),children:(0,t.jsxs)(l.X2,{children:[(0,t.jsxs)(l.sg,{className:L().left,children:[(0,t.jsxs)("div",{className:L().logo,children:[(0,t.jsx)(l.JO,{size:"lg",children:(0,t.jsx)(x.Z.Logo,{})}),(0,t.jsx)(l.xv,{className:L().text,children:"umami"})]}),(0,t.jsx)("div",{className:L().links,children:i.map(s=>{let{url:n,label:i}=s;return(0,t.jsx)(o(),{href:n,className:d()({[L().selected]:e.startsWith(n)}),children:(0,t.jsx)(l.xv,{children:i})},n)})})]}),(0,t.jsxs)(l.sg,{className:L().right,children:[(0,t.jsxs)("div",{className:L().actions,children:[(0,t.jsx)(h.Z,{}),(0,t.jsx)(m.Z,{}),(0,t.jsx)(g,{})]}),(0,t.jsx)("div",{className:L().mobile,children:(0,t.jsx)(M,{})})]})]})})},F=n(32955),O=n(64529),S=n(12902),z=n(81249),A=n.n(z),D=n(73865);let E={current:D.we,latest:null,hasUpdate:!1,checked:!1,releaseUrl:null},J=(0,O.Ue)(()=>({...E}));async function P(){let{current:e}=J.getState(),s=await fetch("".concat(D.nI,"?v=").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.ok?e.json():null);s&&J.setState((0,S.Uy)(n=>{let{latest:t,url:l}=s,i=(0,F.rV)(D.aC),r=!!(t&&(null==i?void 0:i.version)!==t&&A().gt(t,e));return n.current=e,n.latest=t,n.hasUpdate=r,n.checked=!0,n.releaseUrl=l,n}))}var R=n(82299),G=n.n(R),W=function(e){let{user:s,config:n}=e,{formatMessage:i,labels:r,messages:a}=(0,_.Z)(),{latest:o,checked:u,hasUpdate:d,releaseUrl:x}=J(),{pathname:h}=(0,c.useRouter)(),[m,j]=(0,N.useState)(u),v=(null==s?void 0:s.isAdmin)&&!(null==n?void 0:n.updatesDisabled)&&!(null==n?void 0:n.cloudMode)&&!h.includes("/share/")&&!m,b=(0,N.useCallback)(()=>{(0,F.LS)(D.aC,{version:o,time:Date.now()})},[o]);return((0,N.useEffect)(()=>{v&&P()},[v]),v&&d)?(0,k.createPortal)((0,t.jsxs)(l.X2,{className:G().notice,children:[(0,t.jsx)(l.sg,{variant:"two",className:G().message,children:i(a.newVersionAvailable,{version:"v".concat(o)})}),(0,t.jsxs)(l.sg,{className:G().buttons,children:[(0,t.jsx)(l.zx,{variant:"primary",onClick:function(){b(),j(!0),open(x||D.Bv,"_blank")},children:i(r.viewDetails)}),(0,t.jsx)(l.zx,{onClick:function(){b(),j(!0)},children:i(r.dismiss)})]})]}),document.body):null},X=n(24474),q=n(51327),T=n.n(q),I=function(e){let{title:s,children:n}=e,{user:i}=(0,X.Gb)(),a=(0,X.ZR)();return!i||!a||(null==a?void 0:a.uiDisabled)?null:(0,t.jsxs)("div",{className:T().layout,children:[(0,t.jsx)(W,{user:i,config:a}),(0,t.jsx)(r(),{children:(0,t.jsx)("title",{children:s?"".concat(s," | umami"):"umami"})}),(0,t.jsx)("nav",{className:T().nav,children:(0,t.jsx)(U,{})}),(0,t.jsx)("main",{className:T().body,children:(0,t.jsx)(l.W2,{children:n})})]})}},63163:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return a}});var t=n(85893),l=n(29120),i=n(16822),r=n(44085);function a(){let{formatMessage:e,labels:s}=(0,r.Z)();return(0,t.jsx)(i.Z,{title:e(s.pageNotFound),children:(0,t.jsx)(l.X2,{children:(0,t.jsx)(l.sg,{children:(0,t.jsx)(l.DL,{alignItems:"center",justifyContent:"center",flex:1,style:{minHeight:600},children:(0,t.jsx)("h1",{children:e(s.pageNotFound)})})})})})}},93766:function(e){e.exports={menu:"MobileMenu_menu__DO6aZ",items:"MobileMenu_items__N_NHj",item:"MobileMenu_item__iN83G",selected:"MobileMenu_selected__Z1kQJ",submenu:"MobileMenu_submenu__eW8zr"}},82299:function(e){e.exports={notice:"UpdateNotice_notice__vSRjT",message:"UpdateNotice_message__ntCR8",buttons:"UpdateNotice_buttons__F6euy"}},35177:function(e){e.exports={menu:"ProfileButton_menu__NQdVL",item:"ProfileButton_item__FBiu1"}},51327:function(e){e.exports={layout:"AppLayout_layout__8Fgjq",nav:"AppLayout_nav__Bmoe1",body:"AppLayout_body__pAojL"}},52963:function(e){e.exports={navbar:"NavBar_navbar__1L4iC",left:"NavBar_left__xjgkC",right:"NavBar_right__G2alC",logo:"NavBar_logo__0W9iy",links:"NavBar_links__Sh5Fe",selected:"NavBar_selected__jgveb",actions:"NavBar_actions__CpMkm",mobile:"NavBar_mobile__NlFK6"}}},function(e){e.O(0,[678,885,668,762,249,67,774,888,179],function(){return e(e.s=20394)}),_N_E=e.O()}]);