(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42],{5148:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/console/[[...id]]",function(){return n(75479)}])},66531:function(e,t,n){"use strict";var r=n(85893),a=n(67294),i=n(29120),s=n(81109),o=n.n(s);t.Z=function(e){let{children:t}=e,[n,s]=(0,a.useState)({x:-1e3,y:-1e3});return(0,a.useEffect)(()=>{let e=e=>{s({x:e.clientX,y:e.clientY})};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[]),(0,r.jsx)(i.u,{className:o().tooltip,style:{left:n.x,top:n.y},children:t})}},92754:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var r=n(85893),a=n(67294),i=n(29120),s=n(94184),o=n.n(s),c=n(9085),l=n(66531),d=n(16765),u=n(91998),h=n(43168),m=n(77668),f=n.n(m),x=function(e){var t;let{chart:n}=e,{locale:s}=(0,u.Z)(),c=(0,h.Z)(),l=e=>{let t=n.getDatasetMeta(e);t.hidden=null===t.hidden?!n.data.datasets[e].hidden:null,n.update(),c()};return((0,a.useEffect)(()=>{c()},[s,c]),null==n?void 0:null===(t=n.legend)||void 0===t?void 0:t.legendItems.find(e=>{let{text:t}=e;return t}))?(0,r.jsx)("div",{className:f().legend,children:n.legend.legendItems.map(e=>{let{text:t,fillStyle:n,datasetIndex:a,hidden:c}=e,u=(0,d.Vi)(n);return(0,r.jsx)("div",{className:o()(f().label,{[f().hidden]:c}),onClick:()=>l(a),children:(0,r.jsx)(i.KT,{color:u.alpha(u.alpha()+.2).toHex(),children:(0,r.jsx)("span",{className:s,children:t})})},t)})}):null},v=n(53353),p=n(73865),b=n(7246),g=n(1535),j=n.n(g),w=function(e){let{datasets:t,unit:n,animationDuration:s=p._F,stacked:d=!1,loading:h=!1,renderXLabel:m,renderYLabel:f,XAxisType:g="time",YAxisType:w="linear",renderTooltipPopup:_,onCreate:k,onUpdate:y,className:Z}=e,S=(0,a.useRef)(),C=(0,a.useRef)(null),[N,P]=(0,a.useState)(null),{locale:E}=(0,u.Z)(),{theme:F,colors:O}=(0,v.Z)(),q=(0,a.useCallback)(()=>({responsive:!0,maintainAspectRatio:!1,animation:{duration:s,resize:{duration:0},active:{duration:0}},plugins:{legend:{display:!1},tooltip:{enabled:!1,external:_?_.bind(null,P):void 0}},scales:{x:{type:g,stacked:!0,time:{unit:n},grid:{display:!1},border:{color:O.chart.line},ticks:{color:O.chart.text,autoSkip:!1,maxRotation:0,callback:m}},y:{type:w,min:0,beginAtZero:!0,stacked:d,grid:{color:O.chart.line},border:{color:O.chart.line},ticks:{color:O.text,callback:f||b.F$}}}}),[s,_,m,g,w,d,O,n,E]),L=()=>{c.ZP.defaults.font.family="Inter";let e=q();C.current=new c.ZP(S.current,{type:"bar",data:{datasets:t},options:e}),null==k||k(C.current)},M=()=>{P(null),t.forEach((e,t)=>{C.current.data.datasets[t].data=e.data,C.current.data.datasets[t].label=e.label}),C.current.options=q(),null==y||y(C.current),C.current.update()};return(0,a.useEffect)(()=>{t&&(C.current?M():L())},[t,n,F,s,E]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:o()(j().chart,Z),children:[h&&(0,r.jsx)(i.gb,{position:"page",icon:"dots"}),(0,r.jsx)("canvas",{ref:S})]}),(0,r.jsx)(x,{chart:C.current}),N&&(0,r.jsx)(l.Z,{children:(0,r.jsx)("div",{className:j().tooltip,children:N})})]})}},96687:function(e,t,n){"use strict";var r=n(85893),a=n(67294),i=n(29120),s=n(16765),o=n(92754),c=n(91534),l=n(24474),d=n(73865),u=n(7246);t.Z=function(e){let{websiteId:t,className:n,token:h}=e,{get:m,useQuery:f}=(0,l.h_)(),[{startDate:x,endDate:v,unit:p,modified:b}]=(0,l.Sy)(t),{locale:g}=(0,l.bU)(),[j]=(0,l.gi)(),{query:{url:w,eventName:_}}=(0,l.v$)(),{data:k,isLoading:y}=f(["events",t,b,_],()=>m("/websites/".concat(t,"/events"),{startAt:+x,endAt:+v,unit:p,timezone:j,url:w,eventName:_,token:h})),Z=(0,a.useMemo)(()=>{if(!k)return[];if(y)return k;let e=k.reduce((e,t)=>{let{x:n,t:r,y:a}=t;return e[n]||(e[n]=[]),e[n].push({x:r,y:a}),e},{});return Object.keys(e).forEach(t=>{e[t]=(0,c.QR)(e[t],x,v,p)}),Object.keys(e).map((t,n)=>{let r=(0,s.Vi)(d.y2[n%d.y2.length]);return{label:t,data:e[t],lineTension:0,backgroundColor:r.alpha(.6).toRgbString(),borderColor:r.alpha(.7).toRgbString(),borderWidth:1}})},[k,y,x,v,p]);return y?(0,r.jsx)(i.gb,{icon:"dots"}):(0,r.jsx)(o.Z,{className:n,datasets:Z,unit:p,height:300,loading:y,stacked:!0,renderXLabel:(0,u.oq)(p,g),renderTooltipPopup:(0,u.zK)(p,g)})}},35702:function(e,t,n){"use strict";var r=n(67294),a=n(92754),i=n(24474),s=n(7246);t.Z=function(e){let{websiteId:t,data:n,unit:o,loading:c,...l}=e,{formatMessage:d,labels:u}=(0,i.y_)(),{colors:h}=(0,i.Fg)(),{locale:m}=(0,i.bU)(),f=(0,r.useMemo)(()=>n?[{label:d(u.uniqueVisitors),data:n.sessions,borderWidth:1,...h.chart.visitors},{label:d(u.pageViews),data:n.pageviews,borderWidth:1,...h.chart.views}]:[],[n,h,d,u]);return(0,r.createElement)(a.Z,{...l,key:t,datasets:f,unit:o,loading:c,renderXLabel:(0,s.oq)(o,m),renderTooltipPopup:(0,s.zK)(o,m)})}},17924:function(e,t,n){"use strict";var r=n(85893),a=n(67294),i=n(35702),s=n(24474),o=n(91534);t.Z=function(e){let{websiteId:t}=e,[n]=(0,s.Sy)(t),{startDate:c,endDate:l,unit:d,modified:u}=n,[h]=(0,s.gi)(),{query:{url:m,referrer:f,os:x,browser:v,device:p,country:b,region:g,city:j,title:w}}=(0,s.v$)(),{get:_,useQuery:k}=(0,s.h_)(),{data:y,isLoading:Z}=k(["websites:pageviews",{websiteId:t,modified:u,url:m,referrer:f,os:x,browser:v,device:p,country:b,region:g,city:j,title:w}],()=>_("/websites/".concat(t,"/pageviews"),{startAt:+c,endAt:+l,unit:d,timezone:h,url:m,referrer:f,os:x,browser:v,device:p,country:b,region:g,city:j,title:w})),S=(0,a.useMemo)(()=>y?{pageviews:(0,o.QR)(y.pageviews,c,l,d),sessions:(0,o.QR)(y.sessions,c,l,d)}:{pageviews:[],sessions:[]},[y,c,l,d]);return(0,r.jsx)(i.Z,{websiteId:t,data:S,unit:d,loading:Z})}},7246:function(e,t,n){"use strict";n.d(t,{F$:function(){return o},oq:function(){return c},zK:function(){return l}});var r=n(85893),a=n(29120),i=n(91534),s=n(29163);function o(e){return+e>1e3?(0,s.mu)(e):e}function c(e,t){return(n,r,a)=>{let s=new Date(a[r].value);switch(e){case"minute":return(0,i.p6)(s,"h:mm",t);case"hour":return(0,i.p6)(s,"p",t);case"day":return(0,i.p6)(s,"MMM d",t);case"month":return(0,i.p6)(s,"MMM",t);case"year":return(0,i.p6)(s,"YYY",t);default:return n}}}function l(e,t){return(n,o)=>{var c;let{opacity:l,labelColors:d,dataPoints:u}=o.tooltip;if(!(null==u?void 0:u.length)||!l){n(null);return}n((0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,i.p6)(new Date(u[0].raw.x),{millisecond:"T",second:"pp",minute:"p",hour:"h:mm aaa - PP",day:"PPPP",week:"PPPP",month:"LLLL yyyy",quarter:"qqq",year:"yyyy"}[e],t)}),(0,r.jsx)("div",{children:(0,r.jsxs)(a.KT,{color:null==d?void 0:null===(c=d[0])||void 0===c?void 0:c.backgroundColor,children:[(0,s.mu)(u[0].raw.y)," ",u[0].dataset.label]})})]}))}}},29163:function(e,t,n){"use strict";function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["m","s"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",{days:r,hours:a,minutes:i,seconds:s,ms:o}=function(e){let t=~~(e/86400),n=~~(e/3600)-24*t,r=~~(e/60)-1440*t-60*n;return{days:t,hours:n,minutes:r,seconds:~~e-86400*t-3600*n-60*r,ms:(e-~~e)*1e3}}(e),c="";return(r>0&&-1!==t.indexOf("d")&&(c+="".concat(r,"d").concat(n)),a>0&&-1!==t.indexOf("h")&&(c+="".concat(a,"h").concat(n)),i>0&&-1!==t.indexOf("m")&&(c+="".concat(i,"m").concat(n)),s>0&&-1!==t.indexOf("s")&&(c+="".concat(s,"s").concat(n)),o>0&&-1!==t.indexOf("ms")&&(c+="".concat(o,"ms")),c)?c:"0".concat(t[t.length-1])}function a(e){return Number(e).toFixed(0)}function i(e){let t=Number(e);return t>=1e6?"".concat((t/1e6).toFixed(1),"m"):t>=1e5?"".concat((t/1e3).toFixed(0),"k"):t>=1e4?"".concat((t/1e3).toFixed(1),"k"):t>=1e3?"".concat((t/1e3).toFixed(2),"k"):a(t)}function s(e){if(!e)return"#ffffff";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);let n="#";for(let e=0;e<3;e++)n+=("00"+(t>>8*e&255).toString(16)).slice(-2);return n}n.d(t,{mu:function(){return i},u_:function(){return s},uf:function(){return a},vM:function(){return r}})},75479:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return _},default:function(){return k}});var r=n(85893),a=n(16822),i=n(81031),s=n(70790),o=n(56754),c=n(96687),l=n(17924),d=n(35338),u=n(9008),h=n.n(u),m=n(41664),f=n.n(m),x=n(11163),v=n(4298),p=n.n(v),b=n(29120),g=n(32137),j=n.n(g),w=function(){let{get:e,useQuery:t}=(0,d.Z)(),{data:n,isLoading:a,error:u}=t(["websites:me"],()=>e("/me/websites")),m=(0,x.useRouter)(),{basePath:v,query:{id:g}}=m;if(!n)return null;let[w]=g||[],_=null==n?void 0:n.data.find(e=>{let{id:t}=e;return w===t});return(0,r.jsxs)(s.Z,{loading:a,error:u,children:[(0,r.jsx)(h(),{children:(0,r.jsx)("title",{children:_?"".concat(_.name," | Umami Console"):"Umami Console"})}),(0,r.jsx)(o.Z,{title:"Test console",children:(0,r.jsx)(i.Z,{websiteId:null==_?void 0:_.id,onSelect:function(e){m.push("/console/".concat(e))}})}),_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p(),{async:!0,"data-website-id":_.id,src:"".concat(v,"/script.js"),"data-cache":"true"}),(0,r.jsxs)(b.X2,{className:j().test,children:[(0,r.jsxs)(b.sg,{xs:"4",children:[(0,r.jsx)("div",{className:j().header,children:"Page links"}),(0,r.jsx)("div",{children:(0,r.jsx)(f(),{href:"/console/".concat(w,"/page/1/?q=abc"),children:"page one"})}),(0,r.jsx)("div",{children:(0,r.jsx)(f(),{href:"/console/".concat(w,"/page/2/?q=123 "),children:"page two"})}),(0,r.jsx)("div",{children:(0,r.jsx)("a",{href:"https://www.google.com","data-umami-event":"external-link-direct",children:"external link (direct)"})}),(0,r.jsx)("div",{children:(0,r.jsx)("a",{href:"https://www.google.com","data-umami-event":"external-link-tab",target:"_blank",rel:"noreferrer",children:"external link (tab)"})})]}),(0,r.jsxs)(b.sg,{xs:"4",children:[(0,r.jsx)("div",{className:j().header,children:"Click events"}),(0,r.jsx)(b.zx,{id:"send-event-button","data-umami-event":"button-click",variant:"action",children:"Send event"}),(0,r.jsx)("p",{}),(0,r.jsx)(b.zx,{id:"send-event-data-button","data-umami-event":"button-click","data-umami-event-name":"bob","data-umami-event-id":"123",variant:"action",children:"Send event with data"})]}),(0,r.jsxs)(b.sg,{xs:"4",children:[(0,r.jsx)("div",{className:j().header,children:"Javascript events"}),(0,r.jsx)(b.zx,{id:"manual-button",variant:"action",onClick:function(){window.umami.track({url:"/page-view",referrer:"https://www.google.com"}),window.umami.track("track-event-no-data"),window.umami.track("track-event-with-data",{test:"test-data",boolean:!0,booleanError:"true",time:new Date,number:1,number2:100*Math.random(),time2:new Date().toISOString(),nested:{test:"test-data",number:1,object:{test:"test-data"}},array:[1,2,3]})},children:"Run script"}),(0,r.jsx)("p",{}),(0,r.jsx)(b.zx,{id:"manual-button",variant:"action",onClick:function(){window.umami.identify({userId:123,name:"brian",number:100*Math.random(),test:"test-data",boolean:!0,booleanError:"true",time:new Date,time2:new Date().toISOString(),nested:{test:"test-data",number:1,object:{test:"test-data"}},array:[1,2,3]})},children:"Run identify"})]})]}),(0,r.jsx)(b.X2,{children:(0,r.jsxs)(b.sg,{children:[(0,r.jsx)(l.Z,{websiteId:_.id}),(0,r.jsx)(c.Z,{websiteId:_.id})]})})]})]})},_=!0;function k(e){let{disabled:t}=e;return t?null:(0,r.jsx)(a.Z,{children:(0,r.jsx)(w,{})})}},81109:function(e){e.exports={tooltip:"HoverTooltip_tooltip__csrWi"}},1535:function(e){e.exports={chart:"BarChart_chart__EO1Ol",tooltip:"BarChart_tooltip__FWKKp",value:"BarChart_value__D6s2F"}},77668:function(e){e.exports={legend:"Legend_legend__h9a1F",label:"Legend_label__HSSWz",hidden:"Legend_hidden__EX6iO"}},32137:function(e){e.exports={test:"TestConsole_test__fgbiS",header:"TestConsole_header__2fgCQ"}},9085:function(e,t,n){"use strict";var r=n(65750);r.kL.register(...r.zX),t.ZP=r.kL}},function(e){e.O(0,[678,885,668,762,249,67,359,774,888,179],function(){return e(e.s=5148)}),_N_E=e.O()}]);