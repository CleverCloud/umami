(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[296],{85259:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/teams/[id]",function(){return n(10711)}])},98776:function(e,s,n){"use strict";var t=n(85893),a=n(94184),l=n.n(a),i=n(27110),r=n.n(i),c=n(44085);s.Z=function(e){let{message:s,className:n}=e,{formatMessage:a,messages:i}=(0,c.Z)();return(0,t.jsx)("div",{className:l()(r().container,n),children:s||a(i.noDataAvailable)})}},85375:function(e,s,n){"use strict";var t=n(85893),a=n(98776),l=n(44085),i=n(67294),r=n(29120),c=n(34953),d=n.n(c),o=n(233);s.Z=function(e){let{columns:s=[],data:n,children:c,cellRender:u,showSearch:m,showPaging:h,onFilterChange:x,onPageChange:j,onPageSizeChange:g,filterValue:f}=e,{formatMessage:b,messages:v}=(0,l.Z)(),[_,w]=(0,i.useState)(f),{data:y,page:S,count:Z,pageSize:C}=n;return(0,t.jsxs)(t.Fragment,{children:[m&&!!y.length&&(0,t.jsx)(r.Um,{onChange:e=>{w(e),x(e)},delay:1e3,value:_,autoFocus:!0,placeholder:"Search",style:{maxWidth:"300px",marginBottom:"10px"}}),0===y.length&&f&&(0,t.jsx)(a.Z,{message:b(v.noResultsFound)}),y.length>0&&(0,t.jsxs)(r.iA,{columns:s,rows:y,children:[(0,t.jsx)(r.xD,{className:d().header,children:(e,n)=>(0,t.jsx)(r.Dw,{className:d().cell,style:s[n].style,children:e.label},n)}),(0,t.jsx)(r.RM,{className:d().body,children:(e,n,a)=>(e.action=c(e,n,a),(0,t.jsx)(r.SC,{data:e,keys:n,className:d().row,children:(n,a,l)=>(0,t.jsxs)(r.pj,{className:d().cell,style:s[l].style,children:[(0,t.jsx)("label",{className:d().label,children:s[l].label}),u?u(e,n,a,l):n[a]]},l)},a))}),h&&(0,t.jsx)(o.Z,{page:S,pageSize:C,count:Z,onPageChange:j,onPageSizeChange:g})]})]})}},56754:function(e,s,n){"use strict";var t=n(85893),a=n(94184),l=n.n(a);n(67294);var i=n(74282),r=n.n(i);s.Z=function(e){let{title:s,children:n,className:a}=e;return(0,t.jsxs)("div",{className:l()(r().header,a),children:[s&&(0,t.jsx)("div",{className:r().title,children:s}),(0,t.jsx)("div",{className:r().actions,children:n})]})}},7255:function(e,s,n){"use strict";var t=n(85893),a=n(29120),l=n(11163),i=n(60481),r=n(18927),c=n(44085),d=n(35742),o=n.n(d),u=n(83454);s.Z=function(e){var s;let{children:n}=e,{user:d}=(0,r.Z)(),{pathname:m}=(0,l.useRouter)(),{formatMessage:h,labels:x}=(0,c.Z)(),j=!!u.env.cloudMode,g=[{key:"websites",label:h(x.websites),url:"/settings/websites"},{key:"teams",label:h(x.teams),url:"/settings/teams"},d.isAdmin&&{key:"users",label:h(x.users),url:"/settings/users"},{key:"profile",label:h(x.profile),url:"/settings/profile"}].filter(e=>e);return(0,t.jsxs)(a.X2,{children:[!j&&(0,t.jsx)(a.sg,{className:o().menu,defaultSize:12,md:4,lg:3,xl:2,children:(0,t.jsx)(i.Z,{items:g,shallow:!0,selectedKey:null===(s=g.find(e=>{let{url:s}=e;return m===s}))||void 0===s?void 0:s.key})}),(0,t.jsx)(a.sg,{className:o().content,defaultSize:12,md:8,lg:9,xl:10,children:n})]})}},60481:function(e,s,n){"use strict";var t=n(85893),a=n(94184),l=n.n(a),i=n(29120),r=n(11163),c=n(41664),d=n.n(c),o=n(56547),u=n.n(o);s.Z=function(e){let{selectedKey:s,items:n,shallow:a=!0,scroll:c=!1,onSelect:o=()=>{}}=e,{asPath:m}=(0,r.useRouter)();return(0,t.jsx)(i.v2,{items:n,selectedKey:s,className:u().menu,onSelect:o,children:e=>{let{key:s,label:n,url:r}=e;return(0,t.jsx)(i.ck,{className:l()(u().item,{[u().selected]:m.startsWith(r)}),children:(0,t.jsx)(d(),{href:r,shallow:a,scroll:c,children:n})},s)}})}},10711:function(e,s,n){"use strict";n.r(s),n.d(s,{__N_SSP:function(){return F},default:function(){return T}});var t=n(85893),a=n(16822),l=n(7255),i=n(67294),r=n(29120),c=n(70790),d=n(56754),o=n(73865),u=n(18927),m=n(35338),h=n(44085),x=n(32955);let j=()=>(0,x.BY)(16);var g=function(e){let{teamId:s,data:n,onSave:a,readOnly:l}=e,{formatMessage:c,labels:d}=(0,h.Z)(),{post:o,useMutation:u}=(0,m.Z)(),{mutate:x,error:g}=u(e=>o("/teams/".concat(s),e)),f=(0,i.useRef)(null),[b,v]=(0,i.useState)(n.accessCode),_=async e=>{x(e,{onSuccess:async()=>{f.current.reset(e),a(e)}})};return(0,t.jsxs)(r.l0,{ref:f,onSubmit:_,error:g,values:n,children:[(0,t.jsx)(r.p7,{label:c(d.teamId),children:(0,t.jsx)(r.nv,{value:s,readOnly:!0,allowCopy:!0})}),(0,t.jsxs)(r.p7,{label:c(d.name),children:[!l&&(0,t.jsx)(r.Tr,{name:"name",rules:{required:c(d.required)},children:(0,t.jsx)(r.nv,{})}),l&&n.name]}),(0,t.jsx)(r.p7,{label:c(d.accessCode),children:(0,t.jsxs)(r.DL,{gap:10,children:[(0,t.jsx)(r.nv,{value:b,readOnly:!0,allowCopy:!0}),!l&&(0,t.jsx)(r.zx,{onClick:()=>{let e=j();f.current.setValue("accessCode",e,{shouldValidate:!0,shouldDirty:!0}),v(e)},children:c(d.regenerate)})]})}),!l&&(0,t.jsx)(r.Au,{children:(0,t.jsx)(r.Mm,{variant:"primary",children:c(d.save)})})]})},f=function(e){let{teamId:s,userId:n,disabled:a,onSave:l}=e,{formatMessage:i,labels:c}=(0,h.Z)(),{del:d,useMutation:o}=(0,m.Z)(),{mutate:u,isLoading:x}=o(()=>d("/teams/".concat(s,"/users/").concat(n))),j=()=>{u({},{onSuccess:()=>{l()}})};return(0,t.jsxs)(r.fl,{onClick:()=>j(),disabled:a,isLoading:x,children:[(0,t.jsx)(r.JO,{children:(0,t.jsx)(r.PJ.Close,{})}),(0,t.jsx)(r.xv,{children:i(c.remove)})]})},b=n(85375),v=function(e){let{data:s=[],teamId:n,onSave:a,readOnly:l,filterValue:i,onFilterChange:r,onPageChange:c,onPageSizeChange:d}=e,{formatMessage:m,labels:x}=(0,h.Z)(),{user:j}=(0,u.Z)(),g=[{name:"username",label:m(x.username)},{name:"role",label:m(x.role)},{name:"action",label:" "}];return(0,t.jsx)(b.Z,{data:s,columns:g,cellRender:(e,s,n)=>"username"===n?null==e?void 0:e.username:"role"===n?m(x[Object.keys(o.K$).find(s=>o.K$[s]===e.role)||x.unknown]):s[n],showSearch:!0,showPaging:!0,onFilterChange:r,onPageChange:c,onPageSizeChange:d,filterValue:i,children:e=>{var s;return!l&&(0,t.jsx)(f,{teamId:n,userId:e.id,disabled:j.id===(null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.id)||e.role===o.K$.teamOwner,onSave:a})}})},_=n(19491),w=function(e){let{teamId:s,readOnly:n}=e,{showToast:a}=(0,r.e1)(),{formatMessage:l,messages:i}=(0,h.Z)(),{filter:c,page:d,pageSize:o,handleFilterChange:u,handlePageChange:x,handlePageSizeChange:j}=(0,_.Z)(),{get:g,useQuery:f}=(0,m.Z)(),{data:b,isLoading:w,refetch:y}=f(["teams:users",s,c,d,o],()=>g("/teams/".concat(s,"/users"),{filter:c,page:d,pageSize:o}));if(w)return(0,t.jsx)(r.gb,{icon:"dots",style:{minHeight:300}});let S=async()=>{await y(),a({message:l(i.saved),variant:"success"})};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(v,{onSave:S,teamId:s,data:b,readOnly:n,onFilterChange:u,onPageChange:x,onPageSizeChange:j,filterValue:c})})},y=n(41664),S=n.n(y),Z=function(e){let{teamId:s,websiteId:n,onSave:a}=e,{formatMessage:l,labels:i}=(0,h.Z)(),{del:c,useMutation:d}=(0,m.Z)(),{mutate:o,isLoading:u}=d(()=>c("/teams/".concat(s,"/websites/").concat(n))),x=()=>{o({},{onSuccess:()=>{a()}})};return(0,t.jsxs)(r.fl,{onClick:()=>x(),isLoading:u,children:[(0,t.jsx)(r.JO,{children:(0,t.jsx)(r.PJ.Close,{})}),(0,t.jsx)(r.xv,{children:l(i.remove)})]})},C=function(e){let{data:s=[],onSave:n,filterValue:a,onFilterChange:l,onPageChange:i,onPageSizeChange:c,openExternal:d=!1}=e,{formatMessage:o,labels:m}=(0,h.Z)(),{user:x}=(0,u.Z)(),j=[{name:"name",label:o(m.name)},{name:"domain",label:o(m.domain)},{name:"action",label:" "}];return(0,t.jsx)(b.Z,{columns:j,data:s,showSearch:!0,showPaging:!0,onFilterChange:l,onPageChange:i,onPageSizeChange:c,filterValue:a,children:e=>{let{id:s,teamUser:a}=e.teamWebsite[0].team,{id:l,name:i,domain:c,userId:u}=e,h=a[0],j=x.id===u||x.id===h.userId;return e.name=i,e.domain=c,(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S(),{href:"/websites/".concat(l),target:d?"_blank":null,children:(0,t.jsxs)(r.zx,{children:[(0,t.jsx)(r.JO,{children:(0,t.jsx)(r.PJ.External,{})}),(0,t.jsx)(r.xv,{children:o(m.view)})]})}),j&&(0,t.jsx)(Z,{teamId:s,websiteId:l,onSave:n})]})}})},p=n(14337),N=n.n(p),P=function(e){let{items:s=[],websites:n=[],onClick:a}=e;return 0===n.length?null:(0,t.jsx)("div",{className:N().filters,children:n.map(e=>{let n=s.find(s=>s.id===e);return(0,t.jsx)("div",{className:N().tag,children:(0,t.jsxs)(r.zx,{onClick:()=>a(e),variant:"primary",size:"sm",children:[(0,t.jsx)(r.xv,{children:(0,t.jsx)("b",{children:"".concat(n.name)})}),(0,t.jsx)(r.JO,{children:(0,t.jsx)(r.PJ.Close,{})})]})},e)})})},k=function(e){let{teamId:s,onSave:n,onClose:a}=e,{formatMessage:l,labels:c}=(0,h.Z)(),{get:d,post:o,useQuery:u,useMutation:x}=(0,m.Z)(),{mutate:j,error:g}=x(e=>o("/teams/".concat(s,"/websites"),e)),{data:f}=u(["websites"],()=>d("/websites")),[b,v]=(0,i.useState)([]),_=(0,i.useRef)(),w=f&&f.data.length>0;return(0,t.jsx)(t.Fragment,{children:w&&(0,t.jsxs)(r.l0,{onSubmit:()=>{j({websiteIds:b},{onSuccess:async()=>{n(),a()}})},error:g,ref:_,children:[(0,t.jsx)(r.p7,{label:l(c.websites),children:(0,t.jsx)(r.Lt,{items:f.data,onChange:e=>{if(!b.some(s=>s===e)){let s=[...b];s.push(e),v(s)}},style:{width:300},children:e=>{let{id:s,name:n}=e;return(0,t.jsx)(r.ck,{children:n},s)}})}),(0,t.jsx)(P,{items:f.data,websites:b,onClick:e=>{let s=b.filter(s=>s!==e);v(s)}}),(0,t.jsxs)(r.Au,{flex:!0,children:[(0,t.jsx)(r.Mm,{disabled:b&&0===b.length,children:l(c.addWebsite)}),(0,t.jsx)(r.zx,{onClick:a,children:l(c.cancel)})]})]})})},O=function(e){let{teamId:s}=e,{showToast:n}=(0,r.e1)(),{formatMessage:a,labels:l,messages:i}=(0,h.Z)(),{filter:c,page:d,pageSize:o,handleFilterChange:u,handlePageChange:x,handlePageSizeChange:j}=(0,_.Z)(),{get:g,useQuery:f}=(0,m.Z)(),{data:b,isLoading:v,refetch:w}=f(["teams:websites",s,c,d,o],()=>g("/teams/".concat(s,"/websites"),{filter:c,page:d,pageSize:o})),y=b&&0!==b.length;if(v)return(0,t.jsx)(r.gb,{icon:"dots",style:{minHeight:300}});let S=async()=>{await w(),n({message:a(i.saved),variant:"success"})},Z=(0,t.jsxs)(r.iq,{children:[(0,t.jsxs)(r.zx,{variant:"primary",children:[(0,t.jsx)(r.JO,{children:(0,t.jsx)(r.PJ.Plus,{})}),(0,t.jsx)(r.xv,{children:a(l.addWebsite)})]}),(0,t.jsx)(r.u_,{title:a(l.addWebsite),children:e=>(0,t.jsx)(k,{teamId:s,onSave:S,onClose:e})})]});return(0,t.jsxs)("div",{children:[(0,t.jsx)(r.yt,{description:a(i.teamWebsitesInfo),children:Z}),y&&(0,t.jsx)(C,{teamId:s,data:b,onSave:S,onFilterChange:u,onPageChange:x,onPageSizeChange:j,filterValue:c})]})},z=function(e){var s;let{teamId:n}=e,{formatMessage:a,labels:l,messages:x}=(0,h.Z)(),{user:j}=(0,u.Z)(),[f,b]=(0,i.useState)(null),[v,_]=(0,i.useState)("details"),{get:y,useQuery:S}=(0,m.Z)(),{showToast:Z}=(0,r.e1)(),{data:C,isLoading:p}=S(["team",n],()=>{if(n)return y("/teams/".concat(n))},{cacheTime:0}),N=null==C?void 0:null===(s=C.teamUser)||void 0===s?void 0:s.find(e=>{let{userId:s,role:n}=e;return n===o.K$.teamOwner&&s===j.id});return(0,i.useEffect)(()=>{C&&b(C)},[C]),(0,t.jsxs)(c.Z,{loading:p||!f,children:[(0,t.jsx)(d.Z,{title:null==f?void 0:f.name}),(0,t.jsxs)(r.mQ,{selectedKey:v,onSelect:_,style:{marginBottom:30},children:[(0,t.jsx)(r.ck,{children:a(l.details)},"details"),(0,t.jsx)(r.ck,{children:a(l.members)},"members"),(0,t.jsx)(r.ck,{children:a(l.websites)},"websites")]}),"details"===v&&(0,t.jsx)(g,{teamId:n,data:f,onSave:e=>{Z({message:a(x.saved),variant:"success"}),b(s=>({...s,...e}))},readOnly:!N}),"members"===v&&(0,t.jsx)(w,{teamId:n,readOnly:!N}),"websites"===v&&(0,t.jsx)(O,{teamId:n,readOnly:!N})]})},I=n(11163),F=!0;function T(e){let{disabled:s}=e,n=(0,I.useRouter)(),{id:i}=n.query,{formatMessage:r,labels:c}=(0,h.Z)();return!i||s?null:(0,t.jsx)(a.Z,{title:"".concat(r(c.settings)," - ").concat(r(c.teams)),children:(0,t.jsx)(l.Z,{children:(0,t.jsx)(z,{teamId:i})})})}},27110:function(e){e.exports={container:"Empty_container__ZKJsF"}},34953:function(e){e.exports={cell:"SettingsTable_cell__Mdz2s",row:"SettingsTable_row__Tqcw5",label:"SettingsTable_label__jsR11",header:"SettingsTable_header__fbadX"}},74282:function(e){e.exports={header:"PageHeader_header__8CvHt",title:"PageHeader_title__m8eFY",actions:"PageHeader_actions__6l2hP"}},35742:function(e){e.exports={menu:"SettingsLayout_menu__7reR6",content:"SettingsLayout_content__hSAEC"}},56547:function(e){e.exports={menu:"SideNav_menu__NOTB5",item:"SideNav_item__jN5F4",selected:"SideNav_selected__V2_83"}},14337:function(e){e.exports={filters:"WebsiteTags_filters__U6jR_",tag:"WebsiteTags_tag__5Y81y"}}},function(e){e.O(0,[678,885,668,762,249,67,690,774,888,179],function(){return e(e.s=85259)}),_N_E=e.O()}]);