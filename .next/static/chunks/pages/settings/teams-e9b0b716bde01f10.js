(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{30467:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/teams",function(){return s(61325)}])},98776:function(e,n,s){"use strict";var l=s(85893),t=s(94184),r=s.n(t),a=s(27110),i=s.n(a),c=s(44085);n.Z=function(e){let{message:n,className:s}=e,{formatMessage:t,messages:a}=(0,c.Z)();return(0,l.jsx)("div",{className:r()(i().container,s),children:n||t(a.noDataAvailable)})}},60684:function(e,n,s){"use strict";var l=s(85893),t=s(29120),r=s(99369);n.Z=function(e){let{message:n,children:s}=e;return(0,l.jsxs)(t.DL,{direction:"column",alignItems:"center",justifyContent:"center",gap:60,height:600,children:[(0,l.jsx)(t.JO,{size:"xl",children:(0,l.jsx)(r.Z,{})}),(0,l.jsx)(t.xv,{size:"lg",children:n}),(0,l.jsx)("div",{children:s})]})}},85375:function(e,n,s){"use strict";var l=s(85893),t=s(98776),r=s(44085),a=s(67294),i=s(29120),c=s(34953),d=s.n(c),o=s(233);n.Z=function(e){let{columns:n=[],data:s,children:c,cellRender:u,showSearch:x,showPaging:h,onFilterChange:j,onPageChange:m,onPageSizeChange:f,filterValue:g}=e,{formatMessage:v,messages:_}=(0,r.Z)(),[Z,b]=(0,a.useState)(g),{data:S,page:y,count:p,pageSize:w}=s;return(0,l.jsxs)(l.Fragment,{children:[x&&!!S.length&&(0,l.jsx)(i.Um,{onChange:e=>{b(e),j(e)},delay:1e3,value:Z,autoFocus:!0,placeholder:"Search",style:{maxWidth:"300px",marginBottom:"10px"}}),0===S.length&&g&&(0,l.jsx)(t.Z,{message:v(_.noResultsFound)}),S.length>0&&(0,l.jsxs)(i.iA,{columns:n,rows:S,children:[(0,l.jsx)(i.xD,{className:d().header,children:(e,s)=>(0,l.jsx)(i.Dw,{className:d().cell,style:n[s].style,children:e.label},s)}),(0,l.jsx)(i.RM,{className:d().body,children:(e,s,t)=>(e.action=c(e,s,t),(0,l.jsx)(i.SC,{data:e,keys:s,className:d().row,children:(s,t,r)=>(0,l.jsxs)(i.pj,{className:d().cell,style:n[r].style,children:[(0,l.jsx)("label",{className:d().label,children:n[r].label}),u?u(e,s,t,r):s[t]]},r)},t))}),h&&(0,l.jsx)(o.Z,{page:y,pageSize:w,count:p,onPageChange:m,onPageSizeChange:f})]})]})}},56754:function(e,n,s){"use strict";var l=s(85893),t=s(94184),r=s.n(t);s(67294);var a=s(74282),i=s.n(a);n.Z=function(e){let{title:n,children:s,className:t}=e;return(0,l.jsxs)("div",{className:r()(i().header,t),children:[n&&(0,l.jsx)("div",{className:i().title,children:n}),(0,l.jsx)("div",{className:i().actions,children:s})]})}},7255:function(e,n,s){"use strict";var l=s(85893),t=s(29120),r=s(11163),a=s(60481),i=s(18927),c=s(44085),d=s(35742),o=s.n(d),u=s(83454);n.Z=function(e){var n;let{children:s}=e,{user:d}=(0,i.Z)(),{pathname:x}=(0,r.useRouter)(),{formatMessage:h,labels:j}=(0,c.Z)(),m=!!u.env.cloudMode,f=[{key:"websites",label:h(j.websites),url:"/settings/websites"},{key:"teams",label:h(j.teams),url:"/settings/teams"},d.isAdmin&&{key:"users",label:h(j.users),url:"/settings/users"},{key:"profile",label:h(j.profile),url:"/settings/profile"}].filter(e=>e);return(0,l.jsxs)(t.X2,{children:[!m&&(0,l.jsx)(t.sg,{className:o().menu,defaultSize:12,md:4,lg:3,xl:2,children:(0,l.jsx)(a.Z,{items:f,shallow:!0,selectedKey:null===(n=f.find(e=>{let{url:n}=e;return x===n}))||void 0===n?void 0:n.key})}),(0,l.jsx)(t.sg,{className:o().content,defaultSize:12,md:8,lg:9,xl:10,children:s})]})}},60481:function(e,n,s){"use strict";var l=s(85893),t=s(94184),r=s.n(t),a=s(29120),i=s(11163),c=s(41664),d=s.n(c),o=s(56547),u=s.n(o);n.Z=function(e){let{selectedKey:n,items:s,shallow:t=!0,scroll:c=!1,onSelect:o=()=>{}}=e,{asPath:x}=(0,i.useRouter)();return(0,l.jsx)(a.v2,{items:s,selectedKey:n,className:u().menu,onSelect:o,children:e=>{let{key:n,label:s,url:i}=e;return(0,l.jsx)(a.ck,{className:r()(u().item,{[u().selected]:x.startsWith(i)}),children:(0,l.jsx)(d(),{href:i,shallow:t,scroll:c,children:s})},n)}})}},61325:function(e,n,s){"use strict";s.r(n),s.d(n,{__N_SSP:function(){return N},default:function(){return z}});var l=s(85893),t=s(16822),r=s(7255),a=s(60684),i=s(43756),c=s(70790),d=s(56754),o=s(67294),u=s(29120),x=s(35338),h=s(44085),j=function(e){let{onSave:n,onClose:s}=e,{formatMessage:t,labels:r}=(0,h.Z)(),{post:a,useMutation:i}=(0,x.Z)(),{mutate:c,error:d,isLoading:j}=i(e=>a("/teams",e)),m=(0,o.useRef)(null),f=async e=>{c(e,{onSuccess:async()=>{n(),s()}})};return(0,l.jsxs)(u.l0,{ref:m,onSubmit:f,error:d,children:[(0,l.jsx)(u.p7,{label:t(r.name),children:(0,l.jsx)(u.Tr,{name:"name",rules:{required:t(r.required)},children:(0,l.jsx)(u.nv,{autoComplete:"off"})})}),(0,l.jsxs)(u.Au,{flex:!0,children:[(0,l.jsx)(u.Mm,{variant:"primary",disabled:j,children:t(r.save)}),(0,l.jsx)(u.zx,{disabled:j,onClick:s,children:t(r.cancel)})]})]})},m=s(85375),f=s(91998),g=s(18927),v=s(73865),_=s(41664),Z=s.n(_),b=function(e){let{teamId:n,teamName:s,onSave:t,onClose:r}=e,{formatMessage:a,labels:i,messages:c,FormattedMessage:d}=(0,h.Z)(),{del:o,useMutation:j}=(0,x.Z)(),{mutate:m,error:f,isLoading:g}=j(e=>o("/teams/".concat(n),e)),v=async e=>{m(e,{onSuccess:async()=>{t(),r()}})};return(0,l.jsxs)(u.l0,{onSubmit:v,error:f,children:[(0,l.jsx)("p",{children:(0,l.jsx)(d,{...c.confirmDelete,values:{target:(0,l.jsx)("b",{children:s})}})}),(0,l.jsxs)(u.Au,{flex:!0,children:[(0,l.jsx)(u.Mm,{variant:"danger",disabled:g,children:a(i.delete)}),(0,l.jsx)(u.zx,{onClick:r,children:a(i.cancel)})]})]})},S=function(e){let{teamId:n,userId:s,teamName:t,onSave:r,onClose:a}=e,{formatMessage:i,labels:c,messages:d,FormattedMessage:o}=(0,h.Z)(),{del:j,useMutation:m}=(0,x.Z)(),{mutate:f,error:g,isLoading:v}=m(()=>j("/teams/".concat(n,"/users/").concat(s))),_=async()=>{f({},{onSuccess:async()=>{r(),a()}})};return(0,l.jsxs)(u.l0,{onSubmit:_,error:g,children:[(0,l.jsx)("p",{children:(0,l.jsx)(o,{...d.confirmDelete,values:{target:(0,l.jsx)("b",{children:t})}})}),(0,l.jsxs)(u.Au,{flex:!0,children:[(0,l.jsx)(u.Mm,{variant:"danger",disabled:v,children:i(c.leave)}),(0,l.jsx)(u.zx,{onClick:a,children:i(c.cancel)})]})]})},y=function(e){let{data:n={data:[]},onDelete:s,filterValue:t,onFilterChange:r,onPageChange:a,onPageSizeChange:i}=e,{formatMessage:c,labels:d}=(0,h.Z)(),{user:o}=(0,g.Z)(),{dir:x}=(0,f.Z)(),j=[{name:"name",label:c(d.name)},{name:"owner",label:c(d.owner)},{name:"action",label:" "}];return(0,l.jsx)(m.Z,{data:n,columns:j,cellRender:(e,n,s)=>{if("owner"===s){var l,t;return null===(t=e.teamUser.find(e=>{let{role:n}=e;return n===v.K$.teamOwner}))||void 0===t?void 0:null===(l=t.user)||void 0===l?void 0:l.username}return n[s]},showSearch:!0,showPaging:!0,onFilterChange:r,onPageChange:a,onPageSizeChange:i,filterValue:t,children:e=>{let{id:n,teamUser:t}=e,r=t.find(e=>{let{role:n}=e;return n===v.K$.teamOwner}),a=o.id===(null==r?void 0:r.userId);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z(),{href:"/settings/teams/".concat(n),children:(0,l.jsxs)(u.zx,{children:[(0,l.jsx)(u.JO,{children:(0,l.jsx)(u.PJ.Show,{})}),(0,l.jsx)(u.xv,{children:c(d.view)})]})}),a&&(0,l.jsxs)(u.iq,{children:[(0,l.jsxs)(u.zx,{children:[(0,l.jsx)(u.JO,{children:(0,l.jsx)(u.PJ.Trash,{})}),(0,l.jsx)(u.xv,{children:c(d.delete)})]}),(0,l.jsx)(u.u_,{title:c(d.deleteTeam),children:n=>(0,l.jsx)(b,{teamId:e.id,teamName:e.name,onSave:s,onClose:n})})]}),!a&&(0,l.jsxs)(u.iq,{children:[(0,l.jsxs)(u.zx,{children:[(0,l.jsx)(u.JO,{rotate:"rtl"===x?180:0,children:(0,l.jsx)(u.PJ.ArrowRight,{})}),(0,l.jsx)(u.xv,{children:c(d.leave)})]}),(0,l.jsx)(u.u_,{title:c(d.leaveTeam),children:t=>(0,l.jsx)(S,{teamId:n,userId:o.id,teamName:e.name,onSave:s,onClose:t})})]})]})}})},p=function(e){let{onSave:n,onClose:s}=e,{formatMessage:t,labels:r,getMessage:a}=(0,h.Z)(),{post:i,useMutation:c}=(0,x.Z)(),{mutate:d,error:j}=c(e=>i("/teams/join",e)),m=(0,o.useRef)(null),f=async e=>{d(e,{onSuccess:async()=>{n(),s()}})};return(0,l.jsxs)(u.l0,{ref:m,onSubmit:f,error:j&&a(j),children:[(0,l.jsx)(u.p7,{label:t(r.accessCode),children:(0,l.jsx)(u.Tr,{name:"accessCode",rules:{required:t(r.required)},children:(0,l.jsx)(u.nv,{autoComplete:"off"})})}),(0,l.jsxs)(u.Au,{flex:!0,children:[(0,l.jsx)(u.Mm,{variant:"primary",children:t(r.join)}),(0,l.jsx)(u.zx,{onClick:s,children:t(r.cancel)})]})]})},w=s(19491),C=function(){let{user:e}=(0,g.Z)(),{formatMessage:n,labels:s,messages:t}=(0,h.Z)(),{filter:r,page:m,pageSize:f,handleFilterChange:_,handlePageChange:Z,handlePageSizeChange:b}=(0,w.Z)(),[S,C]=(0,o.useState)(0),{get:N,useQuery:z}=(0,x.Z)(),{data:P,isLoading:T,error:k}=z(["teams",S,r,m,f],()=>N("/teams",{filter:r,page:m,pageSize:f})),O=P&&(null==P?void 0:P.data.length)!==0,{showToast:A}=(0,u.e1)(),F=()=>{C(e=>e+1),A({message:n(t.saved),variant:"success"})},J=()=>{C(e=>e+1),A({message:n(t.saved),variant:"success"})},R=(0,l.jsxs)(u.iq,{children:[(0,l.jsxs)(u.zx,{variant:"secondary",children:[(0,l.jsx)(u.JO,{children:(0,l.jsx)(i.Z.AddUser,{})}),(0,l.jsx)(u.xv,{children:n(s.joinTeam)})]}),(0,l.jsx)(u.u_,{title:n(s.joinTeam),children:e=>(0,l.jsx)(p,{onSave:J,onClose:e})})]}),q=(0,l.jsx)(l.Fragment,{children:e.role!==v.K$.viewOnly&&(0,l.jsxs)(u.iq,{children:[(0,l.jsxs)(u.zx,{variant:"primary",children:[(0,l.jsx)(u.JO,{children:(0,l.jsx)(i.Z.Plus,{})}),(0,l.jsx)(u.xv,{children:n(s.createTeam)})]}),(0,l.jsx)(u.u_,{title:n(s.createTeam),children:e=>(0,l.jsx)(j,{onSave:F,onClose:e})})]})});return(0,l.jsxs)(c.Z,{loading:T,error:k,children:[(0,l.jsx)(d.Z,{title:n(s.teams),children:(O||r)&&(0,l.jsxs)(u.DL,{gap:10,children:[R,q]})}),(O||r)&&(0,l.jsx)(y,{data:P,onDelete:()=>{C(e=>e+1),A({message:n(t.saved),variant:"success"})},onFilterChange:_,onPageChange:Z,onPageSizeChange:b,filterValue:r}),!O&&!r&&(0,l.jsx)(a.Z,{message:n(t.noTeams),children:(0,l.jsxs)(u.DL,{gap:10,children:[R,q]})})]})},N=!0;function z(e){let{disabled:n}=e,{formatMessage:s,labels:a}=(0,h.Z)();return n?null:(0,l.jsx)(t.Z,{title:"".concat(s(a.settings)," - ").concat(s(a.teams)),children:(0,l.jsx)(r.Z,{children:(0,l.jsx)(C,{})})})}},27110:function(e){e.exports={container:"Empty_container__ZKJsF"}},34953:function(e){e.exports={cell:"SettingsTable_cell__Mdz2s",row:"SettingsTable_row__Tqcw5",label:"SettingsTable_label__jsR11",header:"SettingsTable_header__fbadX"}},74282:function(e){e.exports={header:"PageHeader_header__8CvHt",title:"PageHeader_title__m8eFY",actions:"PageHeader_actions__6l2hP"}},35742:function(e){e.exports={menu:"SettingsLayout_menu__7reR6",content:"SettingsLayout_content__hSAEC"}},56547:function(e){e.exports={menu:"SideNav_menu__NOTB5",item:"SideNav_item__jN5F4",selected:"SideNav_selected__V2_83"}}},function(e){e.O(0,[678,885,668,762,249,67,690,774,888,179],function(){return e(e.s=30467)}),_N_E=e.O()}]);