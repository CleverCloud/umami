(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{91423:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/users",function(){return s(31752)}])},98776:function(e,n,s){"use strict";var r=s(85893),t=s(94184),a=s.n(t),l=s(27110),i=s.n(l),c=s(44085);n.Z=function(e){let{message:n,className:s}=e,{formatMessage:t,messages:l}=(0,c.Z)();return(0,r.jsx)("div",{className:a()(i().container,s),children:n||t(l.noDataAvailable)})}},60684:function(e,n,s){"use strict";var r=s(85893),t=s(29120),a=s(99369);n.Z=function(e){let{message:n,children:s}=e;return(0,r.jsxs)(t.DL,{direction:"column",alignItems:"center",justifyContent:"center",gap:60,height:600,children:[(0,r.jsx)(t.JO,{size:"xl",children:(0,r.jsx)(a.Z,{})}),(0,r.jsx)(t.xv,{size:"lg",children:n}),(0,r.jsx)("div",{children:s})]})}},85375:function(e,n,s){"use strict";var r=s(85893),t=s(98776),a=s(44085),l=s(67294),i=s(29120),c=s(34953),o=s.n(c),u=s(233);n.Z=function(e){let{columns:n=[],data:s,children:c,cellRender:d,showSearch:h,showPaging:x,onFilterChange:m,onPageChange:f,onPageSizeChange:j,filterValue:v}=e,{formatMessage:g,messages:_}=(0,a.Z)(),[Z,b]=(0,l.useState)(v),{data:S,page:p,count:w,pageSize:y}=s;return(0,r.jsxs)(r.Fragment,{children:[h&&!!S.length&&(0,r.jsx)(i.Um,{onChange:e=>{b(e),m(e)},delay:1e3,value:Z,autoFocus:!0,placeholder:"Search",style:{maxWidth:"300px",marginBottom:"10px"}}),0===S.length&&v&&(0,r.jsx)(t.Z,{message:g(_.noResultsFound)}),S.length>0&&(0,r.jsxs)(i.iA,{columns:n,rows:S,children:[(0,r.jsx)(i.xD,{className:o().header,children:(e,s)=>(0,r.jsx)(i.Dw,{className:o().cell,style:n[s].style,children:e.label},s)}),(0,r.jsx)(i.RM,{className:o().body,children:(e,s,t)=>(e.action=c(e,s,t),(0,r.jsx)(i.SC,{data:e,keys:s,className:o().row,children:(s,t,a)=>(0,r.jsxs)(i.pj,{className:o().cell,style:n[a].style,children:[(0,r.jsx)("label",{className:o().label,children:n[a].label}),d?d(e,s,t,a):s[t]]},a)},t))}),x&&(0,r.jsx)(u.Z,{page:p,pageSize:y,count:w,onPageChange:f,onPageSizeChange:j})]})]})}},56754:function(e,n,s){"use strict";var r=s(85893),t=s(94184),a=s.n(t);s(67294);var l=s(74282),i=s.n(l);n.Z=function(e){let{title:n,children:s,className:t}=e;return(0,r.jsxs)("div",{className:a()(i().header,t),children:[n&&(0,r.jsx)("div",{className:i().title,children:n}),(0,r.jsx)("div",{className:i().actions,children:s})]})}},7255:function(e,n,s){"use strict";var r=s(85893),t=s(29120),a=s(11163),l=s(60481),i=s(18927),c=s(44085),o=s(35742),u=s.n(o),d=s(83454);n.Z=function(e){var n;let{children:s}=e,{user:o}=(0,i.Z)(),{pathname:h}=(0,a.useRouter)(),{formatMessage:x,labels:m}=(0,c.Z)(),f=!!d.env.cloudMode,j=[{key:"websites",label:x(m.websites),url:"/settings/websites"},{key:"teams",label:x(m.teams),url:"/settings/teams"},o.isAdmin&&{key:"users",label:x(m.users),url:"/settings/users"},{key:"profile",label:x(m.profile),url:"/settings/profile"}].filter(e=>e);return(0,r.jsxs)(t.X2,{children:[!f&&(0,r.jsx)(t.sg,{className:u().menu,defaultSize:12,md:4,lg:3,xl:2,children:(0,r.jsx)(l.Z,{items:j,shallow:!0,selectedKey:null===(n=j.find(e=>{let{url:n}=e;return h===n}))||void 0===n?void 0:n.key})}),(0,r.jsx)(t.sg,{className:u().content,defaultSize:12,md:8,lg:9,xl:10,children:s})]})}},60481:function(e,n,s){"use strict";var r=s(85893),t=s(94184),a=s.n(t),l=s(29120),i=s(11163),c=s(41664),o=s.n(c),u=s(56547),d=s.n(u);n.Z=function(e){let{selectedKey:n,items:s,shallow:t=!0,scroll:c=!1,onSelect:u=()=>{}}=e,{asPath:h}=(0,i.useRouter)();return(0,r.jsx)(l.v2,{items:s,selectedKey:n,className:d().menu,onSelect:u,children:e=>{let{key:n,label:s,url:i}=e;return(0,r.jsx)(l.ck,{className:a()(d().item,{[d().selected]:h.startsWith(i)}),children:(0,r.jsx)(o(),{href:i,shallow:t,scroll:c,children:s})},n)}})}},31752:function(e,n,s){"use strict";s.r(n),s.d(n,{__N_SSP:function(){return z},default:function(){return O}});var r=s(85893),t=s(16822),a=s(7255),l=s(29120),i=s(70790),c=s(56754),o=s(60684),u=s(84314),d=s(49474),h=s(39710),x=s(11699),m=s(44941),f=s(19013),j=s(52149),v=s(24262),g=s(13882),_=s(41664),Z=s.n(_),b=s(18927),S=s(4846),p=s(35338),w=s(44085),y=function(e){let{userId:n,username:s,onSave:t,onClose:a}=e,{formatMessage:i,FormattedMessage:c,labels:o,messages:u}=(0,w.Z)(),{del:d}=(0,p.Z)(),{mutate:h,error:x,isLoading:m}=(0,S.D)(()=>d("/users/".concat(n))),f=async e=>{h(e,{onSuccess:async()=>{t(),a()}})};return(0,r.jsxs)(l.l0,{onSubmit:f,error:x,children:[(0,r.jsx)("p",{children:(0,r.jsx)(c,{...u.confirmDelete,values:{target:(0,r.jsx)("b",{children:s})}})}),(0,r.jsxs)(l.Au,{flex:!0,children:[(0,r.jsx)(l.Mm,{variant:"danger",disabled:m,children:i(o.delete)}),(0,r.jsx)(l.zx,{disabled:m,onClick:a,children:i(o.cancel)})]})]})},D=s(73865),N=s(85375),C=s(91998),M=function(e){let{data:n={data:[]},onDelete:s,filterValue:t,onFilterChange:a,onPageChange:i,onPageSizeChange:c}=e,{formatMessage:o,labels:_}=(0,w.Z)(),{user:S}=(0,b.Z)(),{dateLocale:p}=(0,C.Z)(),M=[{name:"username",label:o(_.username)},{name:"role",label:o(_.role)},{name:"created",label:o(_.created)},{name:"action",label:" "}];return(0,r.jsx)(N.Z,{data:n,columns:M,cellRender:(e,n,s)=>"created"===s?function(e,n,s){(0,g.Z)(2,arguments);var r,t,a,l,i,c=(0,u.j)(),o=null!==(r=null!==(t=null==s?void 0:s.locale)&&void 0!==t?t:c.locale)&&void 0!==r?r:m.Z;if(!o.formatDistance)throw RangeError("locale must contain formatDistance property");var _=(0,d.Z)(e,n);if(isNaN(_))throw RangeError("Invalid time value");var Z=(0,j.Z)((0,j.Z)({},s),{addSuffix:!!(null==s?void 0:s.addSuffix),comparison:_});_>0?(a=(0,f.Z)(n),l=(0,f.Z)(e)):(a=(0,f.Z)(e),l=(0,f.Z)(n));var b=(0,x.Z)(l,a),S=Math.round((b-((0,v.Z)(l)-(0,v.Z)(a))/1e3)/60);if(S<2){if(null!=s&&s.includeSeconds){if(b<5)return o.formatDistance("lessThanXSeconds",5,Z);if(b<10)return o.formatDistance("lessThanXSeconds",10,Z);if(b<20)return o.formatDistance("lessThanXSeconds",20,Z);if(b<40)return o.formatDistance("halfAMinute",0,Z);else if(b<60)return o.formatDistance("lessThanXMinutes",1,Z);else return o.formatDistance("xMinutes",1,Z)}return 0===S?o.formatDistance("lessThanXMinutes",1,Z):o.formatDistance("xMinutes",S,Z)}if(S<45)return o.formatDistance("xMinutes",S,Z);if(S<90)return o.formatDistance("aboutXHours",1,Z);if(S<1440){var p=Math.round(S/60);return o.formatDistance("aboutXHours",p,Z)}if(S<2520)return o.formatDistance("xDays",1,Z);if(S<43200){var w=Math.round(S/1440);return o.formatDistance("xDays",w,Z)}if(S<86400)return i=Math.round(S/43200),o.formatDistance("aboutXMonths",i,Z);if((i=(0,h.Z)(l,a))<12){var y=Math.round(S/43200);return o.formatDistance("xMonths",y,Z)}var D=i%12,N=Math.floor(i/12);return D<3?o.formatDistance("aboutXYears",N,Z):D<9?o.formatDistance("overXYears",N,Z):o.formatDistance("almostXYears",N+1,Z)}(new Date(e.createdAt),new Date,{addSuffix:!0,locale:p}):"role"===s?o(_[Object.keys(D.K$).find(n=>D.K$[n]===e.role)]||_.unknown):n[s],showSearch:!0,showPaging:!0,onFilterChange:a,onPageChange:i,onPageSizeChange:c,filterValue:t,children:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z(),{href:"/settings/users/".concat(e.id),children:(0,r.jsxs)(l.zx,{children:[(0,r.jsx)(l.JO,{children:(0,r.jsx)(l.PJ.Edit,{})}),(0,r.jsx)(l.xv,{children:o(_.edit)})]})}),(0,r.jsxs)(l.iq,{disabled:e.id===S.id,children:[(0,r.jsxs)(l.zx,{disabled:e.id===S.id,children:[(0,r.jsx)(l.JO,{children:(0,r.jsx)(l.PJ.Trash,{})}),(0,r.jsx)(l.xv,{children:o(_.delete)})]}),(0,r.jsx)(l.u_,{title:o(_.deleteUser),children:n=>(0,r.jsx)(y,{userId:e.id,username:e.username,onSave:s,onClose:n})})]})]})})},k=function(e){let{onSave:n,onClose:s}=e,{post:t,useMutation:a}=(0,p.Z)(),{mutate:i,error:c,isLoading:o}=a(e=>t("/users",e)),{formatMessage:u,labels:d}=(0,w.Z)(),h=async e=>{i(e,{onSuccess:async()=>{n(e),s()}})};return(0,r.jsxs)(l.l0,{onSubmit:h,error:c,children:[(0,r.jsx)(l.p7,{label:u(d.username),children:(0,r.jsx)(l.Tr,{name:"username",rules:{required:u(d.required)},children:(0,r.jsx)(l.nv,{autoComplete:"new-username"})})}),(0,r.jsx)(l.p7,{label:u(d.password),children:(0,r.jsx)(l.Tr,{name:"password",rules:{required:u(d.required)},children:(0,r.jsx)(l.ZI,{autoComplete:"new-password"})})}),(0,r.jsx)(l.p7,{label:u(d.role),children:(0,r.jsx)(l.Tr,{name:"role",rules:{required:u(d.required)},children:(0,r.jsxs)(l.Lt,{renderValue:e=>e===D.K$.user?u(d.user):e===D.K$.admin?u(d.admin):e===D.K$.viewOnly?u(d.viewOnly):void 0,children:[(0,r.jsx)(l.ck,{children:u(d.viewOnly)},D.K$.viewOnly),(0,r.jsx)(l.ck,{children:u(d.user)},D.K$.user),(0,r.jsx)(l.ck,{children:u(d.admin)},D.K$.admin)]})})}),(0,r.jsxs)(l.Au,{flex:!0,children:[(0,r.jsx)(l.Mm,{variant:"primary",disabled:!1,children:u(d.save)}),(0,r.jsx)(l.zx,{disabled:o,onClick:s,children:u(d.cancel)})]})]})},P=function(e){let{onSave:n}=e,{formatMessage:s,labels:t}=(0,w.Z)(),a=()=>{n()};return(0,r.jsxs)(l.iq,{children:[(0,r.jsxs)(l.zx,{variant:"primary",children:[(0,r.jsx)(l.JO,{children:(0,r.jsx)(l.PJ.Plus,{})}),(0,r.jsx)(l.xv,{children:s(t.createUser)})]}),(0,r.jsx)(l.u_,{title:s(t.createUser),children:e=>(0,r.jsx)(k,{onSave:a,onClose:e})})]})},T=s(19491),X=function(){let{formatMessage:e,labels:n,messages:s}=(0,w.Z)(),{user:t}=(0,b.Z)(),{filter:a,page:u,pageSize:d,handleFilterChange:h,handlePageChange:x,handlePageSizeChange:m}=(0,T.Z)(),{get:f,useQuery:j}=(0,p.Z)(),{data:v,isLoading:g,error:_,refetch:Z}=j(["user",a,u,d],()=>f("/users",{filter:a,page:u,pageSize:d}),{enabled:!!t}),{showToast:S}=(0,l.e1)(),y=v&&0!==v.length,D=()=>{Z().then(()=>S({message:e(s.saved),variant:"success"}))};return(0,r.jsxs)(i.Z,{loading:g,error:_,children:[(0,r.jsx)(c.Z,{title:e(n.users),children:(0,r.jsx)(P,{onSave:D})}),(y||a)&&(0,r.jsx)(M,{data:v,onDelete:()=>{Z().then(()=>S({message:e(s.userDeleted),variant:"success"}))},onFilterChange:h,onPageChange:x,onPageSizeChange:m,filterValue:a}),!y&&!a&&(0,r.jsx)(o.Z,{message:e(s.noUsers),children:(0,r.jsx)(P,{onSave:D})})]})},z=!0;function O(e){let{disabled:n}=e,{formatMessage:s,labels:l}=(0,w.Z)();return n?null:(0,r.jsx)(t.Z,{title:"".concat(s(l.settings)," - ").concat(s(l.users)),children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(X,{})})})}},27110:function(e){e.exports={container:"Empty_container__ZKJsF"}},34953:function(e){e.exports={cell:"SettingsTable_cell__Mdz2s",row:"SettingsTable_row__Tqcw5",label:"SettingsTable_label__jsR11",header:"SettingsTable_header__fbadX"}},74282:function(e){e.exports={header:"PageHeader_header__8CvHt",title:"PageHeader_title__m8eFY",actions:"PageHeader_actions__6l2hP"}},35742:function(e){e.exports={menu:"SettingsLayout_menu__7reR6",content:"SettingsLayout_content__hSAEC"}},56547:function(e){e.exports={menu:"SideNav_menu__NOTB5",item:"SideNav_item__jN5F4",selected:"SideNav_selected__V2_83"}}},function(e){e.O(0,[678,885,668,762,249,67,690,774,888,179],function(){return e(e.s=91423)}),_N_E=e.O()}]);