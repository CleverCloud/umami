(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{81031:function(e,s,t){"use strict";var n=t(85893),l=t(29120),i=t(35338),a=t(44085);s.Z=function(e){let{websiteId:s,onSelect:t}=e,{formatMessage:r,labels:o}=(0,a.Z)(),{get:c,useQuery:u}=(0,i.Z)(),{data:d}=u(["websites:me"],()=>c("/me/websites"));return(0,n.jsx)(l.Lt,{items:null==d?void 0:d.data,value:s,renderValue:e=>{var s,t;return null==d?void 0:null===(t=d.data)||void 0===t?void 0:null===(s=t.find(s=>{let{id:t}=s;return t===e}))||void 0===s?void 0:s.name},onChange:t,alignment:"end",placeholder:r(o.selectWebsite),children:e=>{let{id:s,name:t}=e;return(0,n.jsx)(l.ck,{children:t},s)}})}},16822:function(e,s,t){"use strict";t.d(s,{Z:function(){return I}});var n=t(85893),l=t(29120),i=t(9008),a=t.n(i),r=t(41664),o=t.n(r),c=t(11163),u=t(94184),d=t.n(u),x=t(43756),m=t(80483),h=t(52438),_=t(44085),j=t(18927),v=t(35177),b=t.n(v),p=t(91998),g=t(83454),f=function(){let{formatMessage:e,labels:s}=(0,_.Z)(),{user:t}=(0,j.Z)(),i=(0,c.useRouter)(),{dir:a}=(0,p.Z)(),r=!!g.env.cloudMode;return(0,n.jsxs)(l.qh,{children:[(0,n.jsxs)(l.zx,{variant:"quiet",children:[(0,n.jsx)(l.JO,{children:(0,n.jsx)(x.Z.Profile,{})}),(0,n.jsx)(l.JO,{size:"sm",children:(0,n.jsx)(x.Z.ChevronDown,{})})]}),(0,n.jsx)(l.GI,{position:"bottom",alignment:"rtl"===a?"start":"end",children:(0,n.jsxs)(l.v2,{variant:"popup",onSelect:e=>{"profile"===e&&i.push("/settings/profile"),"logout"===e&&i.push("/logout")},className:b().menu,children:[(0,n.jsx)(l.ck,{className:b().item,children:(0,n.jsx)(l.xv,{children:t.username})},"user"),(0,n.jsxs)(l.ck,{className:b().item,divider:!0,children:[(0,n.jsx)(l.JO,{children:(0,n.jsx)(x.Z.User,{})}),(0,n.jsx)(l.xv,{children:e(s.profile)})]},"profile"),!r&&(0,n.jsxs)(l.ck,{className:b().item,children:[(0,n.jsx)(l.JO,{children:(0,n.jsx)(x.Z.Logout,{})}),(0,n.jsx)(l.xv,{children:e(s.logout)})]},"logout")]})})]})},N=t(67294),Z=t(73935),k=t(93766),C=t.n(k),y=function(e){let{items:s=[],onClose:t}=e,{pathname:l}=(0,c.useRouter)(),i=e=>{let{items:s,className:a}=e;return(0,n.jsx)("div",{className:d()(C().items,a),children:s.map(e=>{let{label:s,url:a,children:r}=e,c=l.startsWith(a);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o(),{href:a,className:d()(C().item,{[C().selected]:c}),onClick:t,children:s},a),r&&(0,n.jsx)(i,{items:r,className:C().submenu})]})})})};return(0,Z.createPortal)((0,n.jsx)("div",{className:d()(C().menu),children:(0,n.jsx)(i,{items:s})}),document.body)},w=t(83454),M=function(){let{formatMessage:e,labels:s}=(0,_.Z)(),[t,i]=(0,N.useState)(!1),a=!!w.env.cloudMode,r=[{label:e(s.dashboard),url:"/dashboard"},!a&&{label:e(s.settings),url:"/settings",children:[{label:e(s.websites),url:"/settings/websites"},{label:e(s.teams),url:"/settings/teams"},{label:e(s.users),url:"/settings/users"},{label:e(s.profile),url:"/settings/profile"}]},a&&{label:e(s.profile),url:"/settings/profile"},!a&&{label:e(s.logout),url:"/logout"}].filter(e=>e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.zx,{variant:"quiet",onClick:()=>i(e=>!e),children:(0,n.jsx)(l.JO,{children:t?(0,n.jsx)(x.Z.Close,{}):(0,n.jsx)(x.Z.Menu,{})})}),t&&(0,n.jsx)(y,{items:r,onClose:()=>i(!1)})]})},B=t(52963),L=t.n(B),P=function(){let{pathname:e}=(0,c.useRouter)(),{formatMessage:s,labels:t}=(0,_.Z)(),i=[{label:s(t.dashboard),url:"/dashboard"},{label:s(t.websites),url:"/websites"},{label:s(t.reports),url:"/reports"},{label:s(t.settings),url:"/settings"}].filter(e=>e);return(0,n.jsx)("div",{className:d()(L().navbar),children:(0,n.jsxs)(l.X2,{children:[(0,n.jsxs)(l.sg,{className:L().left,children:[(0,n.jsxs)("div",{className:L().logo,children:[(0,n.jsx)(l.JO,{size:"lg",children:(0,n.jsx)(x.Z.Logo,{})}),(0,n.jsx)(l.xv,{className:L().text,children:"umami"})]}),(0,n.jsx)("div",{className:L().links,children:i.map(s=>{let{url:t,label:i}=s;return(0,n.jsx)(o(),{href:t,className:d()({[L().selected]:e.startsWith(t)}),children:(0,n.jsx)(l.xv,{children:i})},t)})})]}),(0,n.jsxs)(l.sg,{className:L().right,children:[(0,n.jsxs)("div",{className:L().actions,children:[(0,n.jsx)(m.Z,{}),(0,n.jsx)(h.Z,{}),(0,n.jsx)(f,{})]}),(0,n.jsx)("div",{className:L().mobile,children:(0,n.jsx)(M,{})})]})]})})},U=t(32955),z=t(64529),F=t(12902),S=t(81249),A=t.n(S),J=t(73865);let O={current:J.we,latest:null,hasUpdate:!1,checked:!1,releaseUrl:null},R=(0,z.Ue)(()=>({...O}));async function D(){let{current:e}=R.getState(),s=await fetch("".concat(J.nI,"?v=").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.ok?e.json():null);s&&R.setState((0,F.Uy)(t=>{let{latest:n,url:l}=s,i=(0,U.rV)(J.aC),a=!!(n&&(null==i?void 0:i.version)!==n&&A().gt(n,e));return t.current=e,t.latest=n,t.hasUpdate=a,t.checked=!0,t.releaseUrl=l,t}))}var W=t(82299),G=t.n(W),H=function(e){let{user:s,config:t}=e,{formatMessage:i,labels:a,messages:r}=(0,_.Z)(),{latest:o,checked:u,hasUpdate:d,releaseUrl:x}=R(),{pathname:m}=(0,c.useRouter)(),[h,j]=(0,N.useState)(u),v=(null==s?void 0:s.isAdmin)&&!(null==t?void 0:t.updatesDisabled)&&!(null==t?void 0:t.cloudMode)&&!m.includes("/share/")&&!h,b=(0,N.useCallback)(()=>{(0,U.LS)(J.aC,{version:o,time:Date.now()})},[o]);return((0,N.useEffect)(()=>{v&&D()},[v]),v&&d)?(0,Z.createPortal)((0,n.jsxs)(l.X2,{className:G().notice,children:[(0,n.jsx)(l.sg,{variant:"two",className:G().message,children:i(r.newVersionAvailable,{version:"v".concat(o)})}),(0,n.jsxs)(l.sg,{className:G().buttons,children:[(0,n.jsx)(l.zx,{variant:"primary",onClick:function(){b(),j(!0),open(x||J.Bv,"_blank")},children:i(a.viewDetails)}),(0,n.jsx)(l.zx,{onClick:function(){b(),j(!0)},children:i(a.dismiss)})]})]}),document.body):null},q=t(24474),E=t(51327),V=t.n(E),I=function(e){let{title:s,children:t}=e,{user:i}=(0,q.Gb)(),r=(0,q.ZR)();return!i||!r||(null==r?void 0:r.uiDisabled)?null:(0,n.jsxs)("div",{className:V().layout,children:[(0,n.jsx)(H,{user:i,config:r}),(0,n.jsx)(a(),{children:(0,n.jsx)("title",{children:s?"".concat(s," | umami"):"umami"})}),(0,n.jsx)("nav",{className:V().nav,children:(0,n.jsx)(P,{})}),(0,n.jsx)("main",{className:V().body,children:(0,n.jsx)(l.W2,{children:t})})]})}},70790:function(e,s,t){"use strict";var n=t(85893),l=t(94184),i=t.n(l),a=t(29120),r=t(44085),o=t(84325),c=t.n(o);s.Z=function(e){let{className:s,error:t,loading:l,children:o}=e,{formatMessage:u,messages:d}=(0,r.Z)();return t?(0,n.jsx)(a.jL,{variant:"error",children:u(d.error)}):l?(0,n.jsx)(a.gb,{icon:"spinner",size:"xl",position:"page"}):(0,n.jsx)("div",{className:i()(c().page,s),children:o})}},56754:function(e,s,t){"use strict";var n=t(85893),l=t(94184),i=t.n(l);t(67294);var a=t(74282),r=t.n(a);s.Z=function(e){let{title:s,children:t,className:l}=e;return(0,n.jsxs)("div",{className:i()(r().header,l),children:[s&&(0,n.jsx)("div",{className:r().title,children:s}),(0,n.jsx)("div",{className:r().actions,children:t})]})}},93766:function(e){e.exports={menu:"MobileMenu_menu__DO6aZ",items:"MobileMenu_items__N_NHj",item:"MobileMenu_item__iN83G",selected:"MobileMenu_selected__Z1kQJ",submenu:"MobileMenu_submenu__eW8zr"}},82299:function(e){e.exports={notice:"UpdateNotice_notice__vSRjT",message:"UpdateNotice_message__ntCR8",buttons:"UpdateNotice_buttons__F6euy"}},35177:function(e){e.exports={menu:"ProfileButton_menu__NQdVL",item:"ProfileButton_item__FBiu1"}},51327:function(e){e.exports={layout:"AppLayout_layout__8Fgjq",nav:"AppLayout_nav__Bmoe1",body:"AppLayout_body__pAojL"}},52963:function(e){e.exports={navbar:"NavBar_navbar__1L4iC",left:"NavBar_left__xjgkC",right:"NavBar_right__G2alC",logo:"NavBar_logo__0W9iy",links:"NavBar_links__Sh5Fe",selected:"NavBar_selected__jgveb",actions:"NavBar_actions__CpMkm",mobile:"NavBar_mobile__NlFK6"}},84325:function(e){e.exports={page:"Page_page__xxbhi"}},74282:function(e){e.exports={header:"PageHeader_header__8CvHt",title:"PageHeader_title__m8eFY",actions:"PageHeader_actions__6l2hP"}}}]);