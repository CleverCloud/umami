(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[647],{66531:function(e,t,n){"use strict";var l=n(85893),a=n(67294),r=n(29120),s=n(81109),i=n.n(s);t.Z=function(e){let{children:t}=e,[n,s]=(0,a.useState)({x:-1e3,y:-1e3});return(0,a.useEffect)(()=>{let e=e=>{s({x:e.clientX,y:e.clientY})};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[]),(0,l.jsx)(r.u,{className:i().tooltip,style:{left:n.x,top:n.y},children:t})}},92754:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var l=n(85893),a=n(67294),r=n(29120),s=n(94184),i=n.n(s),c=n(9085),o=n(66531),u=n(16765),d=n(91998),m=n(43168),v=n(77668),p=n.n(v),h=function(e){var t;let{chart:n}=e,{locale:s}=(0,d.Z)(),c=(0,m.Z)(),o=e=>{let t=n.getDatasetMeta(e);t.hidden=null===t.hidden?!n.data.datasets[e].hidden:null,n.update(),c()};return((0,a.useEffect)(()=>{c()},[s,c]),null==n?void 0:null===(t=n.legend)||void 0===t?void 0:t.legendItems.find(e=>{let{text:t}=e;return t}))?(0,l.jsx)("div",{className:p().legend,children:n.legend.legendItems.map(e=>{let{text:t,fillStyle:n,datasetIndex:a,hidden:c}=e,d=(0,u.Vi)(n);return(0,l.jsx)("div",{className:i()(p().label,{[p().hidden]:c}),onClick:()=>o(a),children:(0,l.jsx)(r.KT,{color:d.alpha(d.alpha()+.2).toHex(),children:(0,l.jsx)("span",{className:s,children:t})})},t)})}):null},x=n(53353),f=n(73865),_=n(7246),g=n(1535),b=n.n(g),y=function(e){let{datasets:t,unit:n,animationDuration:s=f._F,stacked:u=!1,loading:m=!1,renderXLabel:v,renderYLabel:p,XAxisType:g="time",YAxisType:y="linear",renderTooltipPopup:j,onCreate:w,onUpdate:F,className:Z}=e,k=(0,a.useRef)(),N=(0,a.useRef)(null),[S,P]=(0,a.useState)(null),{locale:M}=(0,d.Z)(),{theme:q,colors:L}=(0,x.Z)(),C=(0,a.useCallback)(()=>({responsive:!0,maintainAspectRatio:!1,animation:{duration:s,resize:{duration:0},active:{duration:0}},plugins:{legend:{display:!1},tooltip:{enabled:!1,external:j?j.bind(null,P):void 0}},scales:{x:{type:g,stacked:!0,time:{unit:n},grid:{display:!1},border:{color:L.chart.line},ticks:{color:L.chart.text,autoSkip:!1,maxRotation:0,callback:v}},y:{type:y,min:0,beginAtZero:!0,stacked:u,grid:{color:L.chart.line},border:{color:L.chart.line},ticks:{color:L.text,callback:p||_.F$}}}}),[s,j,v,g,y,u,L,n,M]),B=()=>{c.ZP.defaults.font.family="Inter";let e=C();N.current=new c.ZP(k.current,{type:"bar",data:{datasets:t},options:e}),null==w||w(N.current)},E=()=>{P(null),t.forEach((e,t)=>{N.current.data.datasets[t].data=e.data,N.current.data.datasets[t].label=e.label}),N.current.options=C(),null==F||F(N.current),N.current.update()};return(0,a.useEffect)(()=>{t&&(N.current?E():B())},[t,n,q,s,M]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:i()(b().chart,Z),children:[m&&(0,l.jsx)(r.gb,{position:"page",icon:"dots"}),(0,l.jsx)("canvas",{ref:k})]}),(0,l.jsx)(h,{chart:N.current}),S&&(0,l.jsx)(o.Z,{children:(0,l.jsx)("div",{className:b().tooltip,children:S})})]})}},35702:function(e,t,n){"use strict";var l=n(67294),a=n(92754),r=n(24474),s=n(7246);t.Z=function(e){let{websiteId:t,data:n,unit:i,loading:c,...o}=e,{formatMessage:u,labels:d}=(0,r.y_)(),{colors:m}=(0,r.Fg)(),{locale:v}=(0,r.bU)(),p=(0,l.useMemo)(()=>n?[{label:u(d.uniqueVisitors),data:n.sessions,borderWidth:1,...m.chart.visitors},{label:u(d.pageViews),data:n.pageviews,borderWidth:1,...m.chart.views}]:[],[n,m,u,d]);return(0,l.createElement)(a.Z,{...o,key:t,datasets:p,unit:i,loading:c,renderXLabel:(0,s.oq)(i,v),renderTooltipPopup:(0,s.zK)(i,v)})}},14704:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var l=n(85893),a=n(67294),r=n(29120),s=n(24474),i=n(26126),c=n.n(i);function o(e){let{name:t,label:n,type:i,values:o,onSelect:u,allowFilterSelect:d=!0}=e,{formatMessage:m,labels:v}=(0,s.y_)(),[p,h]=(0,a.useState)("eq"),[x,f]=(0,a.useState)(),{getFilters:_}=(0,s.mN)(),{formatValue:g}=(0,s.ve)(),b=_(i);return(0,l.jsx)(r.l0,{children:(0,l.jsxs)(r.p7,{label:n,className:c().filter,children:[(0,l.jsxs)(r.DL,{gap:10,children:[d&&(0,l.jsx)(r.Lt,{className:c().dropdown,items:b,value:p,renderValue:e=>{var t;return null===(t=b.find(t=>t.value===e))||void 0===t?void 0:t.label},onChange:h,children:e=>{let{value:t,label:n}=e;return(0,l.jsx)(r.ck,{children:n},t)}}),(0,l.jsx)(r.Lt,{className:c().dropdown,menuProps:{className:c().menu},items:o,value:x,renderValue:e=>g(e,t),onChange:f,style:{minWidth:"250px"},children:e=>(0,l.jsx)(r.ck,{children:g(e,t)},e)})]}),(0,l.jsx)(r.zx,{variant:"primary",onClick:()=>{u({name:t,type:i,filter:p,value:x})},disabled:!p||!x,children:m(v.add)})]})})}},5799:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var l=n(85893),a=n(29120),r=n(24474),s=n(28528),i=n.n(s);function c(e){let{items:t,onSelect:n,showType:s=!0}=e,{formatMessage:c,labels:o}=(0,r.y_)();return(0,l.jsx)(a.l0,{children:(0,l.jsx)(a.p7,{label:c(o.fields),children:(0,l.jsx)(a.v2,{className:i().menu,onSelect:e=>n(t[e]),children:t.map((e,t)=>{let{name:n,label:r,type:c}=e;return(0,l.jsxs)(a.ck,{className:i().item,children:[(0,l.jsx)("div",{children:r||n}),s&&c&&(0,l.jsx)("div",{className:i().type,children:c})]},t)})})})})}},95444:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var l=n(85893),a=n(67294),r=n(5799),s=n(14704),i=n(24474),c=n(29120);function o(e){let{websiteId:t,items:n,onSelect:o,allowFilterSelect:u}=e,[d,m]=(0,a.useState)(),{data:v,isLoading:p}=function(e,t){let{get:n,useQuery:l}=(0,i.h_)(),{data:a,error:r,isLoading:s}=l(["websites:values",e,t],()=>n("/websites/".concat(e,"/values"),{type:t}),{enabled:!!(e&&t)});return{data:a,error:r,isLoading:s}}(t,null==d?void 0:d.name);return d?p?(0,l.jsx)(c.gb,{position:"center",icon:"dots"}):(0,l.jsx)(s.Z,{name:null==d?void 0:d.name,label:null==d?void 0:d.label,type:null==d?void 0:d.type,values:v,onSelect:o,allowFilterSelect:u}):(0,l.jsx)(r.Z,{items:n,onSelect:m,showType:!1})}},61371:function(e,t,n){"use strict";var l=n(85893),a=n(94184),r=n.n(a),s=n(27376),i=n.n(s);t.Z=function(e){let{className:t,style:n,children:a}=e;return(0,l.jsx)("div",{className:r()(i().form,t),style:n,onClick:e=>e.stopPropagation(),children:a})}},17924:function(e,t,n){"use strict";var l=n(85893),a=n(67294),r=n(35702),s=n(24474),i=n(91534);t.Z=function(e){let{websiteId:t}=e,[n]=(0,s.Sy)(t),{startDate:c,endDate:o,unit:u,modified:d}=n,[m]=(0,s.gi)(),{query:{url:v,referrer:p,os:h,browser:x,device:f,country:_,region:g,city:b,title:y}}=(0,s.v$)(),{get:j,useQuery:w}=(0,s.h_)(),{data:F,isLoading:Z}=w(["websites:pageviews",{websiteId:t,modified:d,url:v,referrer:p,os:h,browser:x,device:f,country:_,region:g,city:b,title:y}],()=>j("/websites/".concat(t,"/pageviews"),{startAt:+c,endAt:+o,unit:u,timezone:m,url:v,referrer:p,os:h,browser:x,device:f,country:_,region:g,city:b,title:y})),k=(0,a.useMemo)(()=>F?{pageviews:(0,i.QR)(F.pageviews,c,o,u),sessions:(0,i.QR)(F.sessions,c,o,u)}:{pageviews:[],sessions:[]},[F,c,o,u]);return(0,l.jsx)(r.Z,{websiteId:t,data:k,unit:u,loading:Z})}},8990:function(e,t,n){"use strict";n.d(t,{g:function(){return x}});var l=n(85893),a=n(94184),r=n.n(a),s=n(24474),i=n(98757),c=n(20495),o=n(20691),u=n(95444),d=n(61371),m=n(29163),v=n(29120),p=n(36140),h=n.n(p);function x(e){let{websiteId:t,showFilter:n=!0,sticky:a}=e,{formatMessage:p,labels:x}=(0,s.y_)(),{get:f,useQuery:_}=(0,s.h_)(),[g]=(0,s.Sy)(t),{startDate:b,endDate:y,modified:j}=g,{ref:w,isSticky:F}=(0,s.Ax)({enabled:a}),{resolveUrl:Z,router:k,query:{url:N,referrer:S,title:P,os:M,browser:q,device:L,country:C,region:B,city:E}}=(0,s.v$)(),{data:T,error:W,isLoading:A,isFetched:z}=_(["websites:stats",{websiteId:t,modified:j,url:N,referrer:S,title:P,os:M,browser:q,device:L,country:C,region:B,city:E}],()=>f("/websites/".concat(t,"/stats"),{startAt:+b,endAt:+y,url:N,referrer:S,title:P,os:M,browser:q,device:L,country:C,region:B,city:E})),I=[{name:"url",type:"string",label:p(x.url)},{name:"referrer",type:"string",label:p(x.referrer)},{name:"browser",type:"string",label:p(x.browser)},{name:"os",type:"string",label:p(x.os)},{name:"device",type:"string",label:p(x.device)},{name:"country",type:"string",label:p(x.country)},{name:"region",type:"string",label:p(x.region)},{name:"city",type:"string",label:p(x.city)}],{pageviews:R,uniques:D,bounces:K,totaltime:V}=T||{},Y=Math.min(T&&D.value,T&&K.value),X=T&&{pageviews:R.value-R.change,uniques:D.value-D.change,bounces:K.value-K.change,totaltime:V.value-V.change},O=e=>{let{name:t,value:n}=e;k.push(Z({[t]:n}))};return(0,l.jsxs)(v.X2,{ref:w,className:r()(h().container,{[h().sticky]:a,[h().isSticky]:F}),children:[(0,l.jsx)(v.sg,{defaultSize:12,xl:8,children:(0,l.jsx)(o.Z,{isLoading:A,isFetched:z,error:W,children:!W&&z&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{className:h().card,label:p(x.views),value:R.value,change:R.change}),(0,l.jsx)(c.Z,{className:h().card,label:p(x.visitors),value:D.value,change:D.change}),(0,l.jsx)(c.Z,{className:h().card,label:p(x.bounceRate),value:D.value?Y/D.value*100:0,change:D.value&&D.change&&Y/D.value*100-Math.min(X.uniques,X.bounces)/X.uniques*100||0,format:e=>Number(e).toFixed(0)+"%",reverseColors:!0}),(0,l.jsx)(c.Z,{className:h().card,label:p(x.averageVisitTime),value:V.value&&R.value?V.value/(R.value-K.value):0,change:V.value&&R.value&&-((X.totaltime/(X.pageviews-X.bounces)-V.value/(R.value-K.value))*1)||0,format:e=>"".concat(e<0?"-":"").concat((0,m.vM)(Math.abs(~~e),["m","s"]," "))})]})})}),(0,l.jsx)(v.sg,{defaultSize:12,xl:4,children:(0,l.jsxs)("div",{className:h().actions,children:[n&&(0,l.jsx)(()=>(0,l.jsxs)(v.qh,{children:[(0,l.jsxs)(v.zx,{children:[(0,l.jsx)(v.JO,{children:(0,l.jsx)(v.PJ.Plus,{})}),p(x.filter)]}),(0,l.jsx)(v.GI,{position:"bottom",alignment:"start",className:h().popup,children:e=>(0,l.jsx)(d.Z,{onClose:e,children:(0,l.jsx)(u.Z,{websiteId:t,items:I,onSelect:t=>{O(t),e()},allowFilterSelect:!1})})})]}),{}),(0,l.jsx)(i.Z,{websiteId:t})]})})]})}},7246:function(e,t,n){"use strict";n.d(t,{F$:function(){return i},oq:function(){return c},zK:function(){return o}});var l=n(85893),a=n(29120),r=n(91534),s=n(29163);function i(e){return+e>1e3?(0,s.mu)(e):e}function c(e,t){return(n,l,a)=>{let s=new Date(a[l].value);switch(e){case"minute":return(0,r.p6)(s,"h:mm",t);case"hour":return(0,r.p6)(s,"p",t);case"day":return(0,r.p6)(s,"MMM d",t);case"month":return(0,r.p6)(s,"MMM",t);case"year":return(0,r.p6)(s,"YYY",t);default:return n}}}function o(e,t){return(n,i)=>{var c;let{opacity:o,labelColors:u,dataPoints:d}=i.tooltip;if(!(null==d?void 0:d.length)||!o){n(null);return}n((0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:(0,r.p6)(new Date(d[0].raw.x),{millisecond:"T",second:"pp",minute:"p",hour:"h:mm aaa - PP",day:"PPPP",week:"PPPP",month:"LLLL yyyy",quarter:"qqq",year:"yyyy"}[e],t)}),(0,l.jsx)("div",{children:(0,l.jsxs)(a.KT,{color:null==u?void 0:null===(c=u[0])||void 0===c?void 0:c.backgroundColor,children:[(0,s.mu)(d[0].raw.y)," ",d[0].dataset.label]})})]}))}}},81109:function(e){e.exports={tooltip:"HoverTooltip_tooltip__csrWi"}},1535:function(e){e.exports={chart:"BarChart_chart__EO1Ol",tooltip:"BarChart_tooltip__FWKKp",value:"BarChart_value__D6s2F"}},77668:function(e){e.exports={legend:"Legend_legend__h9a1F",label:"Legend_label__HSSWz",hidden:"Legend_hidden__EX6iO"}},26126:function(e){e.exports={selected:"FieldFilterForm_selected__LjAfn",popup:"FieldFilterForm_popup__4LhTY",filter:"FieldFilterForm_filter__TYCkW",dropdown:"FieldFilterForm_dropdown__gqFsA",menu:"FieldFilterForm_menu__vsuBG"}},28528:function(e){e.exports={menu:"FieldSelectForm_menu___e4fQ",item:"FieldSelectForm_item__BiPDp",type:"FieldSelectForm_type__nByGv"}},27376:function(e){e.exports={form:"PopupForm_form__aI3Zu"}},36140:function(e){e.exports={container:"WebsiteMetricsBar_container__l48_N",actions:"WebsiteMetricsBar_actions__9j6qn",sticky:"WebsiteMetricsBar_sticky__hmFXT",isSticky:"WebsiteMetricsBar_isSticky__T4h2B"}}}]);