(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{68716:function(e,t,n){"use strict";var a=n(85893),s=n(29120),r=n(19733),i=n.n(r),c=n(44085);t.Z=function(){let{formatMessage:e,messages:t}=(0,c.Z)();return(0,a.jsxs)("div",{className:i().error,children:[(0,a.jsx)(s.JO,{className:i().icon,size:"large",children:(0,a.jsx)(s.PJ.Alert,{})}),(0,a.jsx)(s.xv,{children:e(t.error)})]})}},4647:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var a=n(85893),s=n(67294),r=n(29120),i=n(10876),c=n(3151),l=n(42699),o=n(313),d=n(91998),u=n(95323),x=n(73865),_=n(44085),h=n(39030),m=n.n(h),v=function(e){let{startDate:t,endDate:n,minDate:i,maxDate:h,onChange:v,onClose:f}=e,[j,b]=(0,s.useState)((0,c.Z)(t,n)?x.Lx:x.B2),[g,p]=(0,s.useState)(t),[D,N]=(0,s.useState)(t),[C,w]=(0,s.useState)(n),{locale:Z}=(0,d.Z)(),{formatMessage:k,labels:y}=(0,_.Z)(),M=j===x.Lx?(0,l.Z)(i,g)&&(0,o.Z)(h,g):(0,l.Z)(D,C);return(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsx)("div",{className:m().filter,children:(0,a.jsxs)(r.hE,{selectedKey:j,onSelect:b,children:[(0,a.jsx)(r.zx,{children:k(y.singleDay)},x.Lx),(0,a.jsx)(r.zx,{children:k(y.dateRange)},x.B2)]})}),(0,a.jsxs)("div",{className:m().calendars,children:[j===x.Lx&&(0,a.jsx)(r.f,{date:g,minDate:i,maxDate:h,onChange:p}),j===x.B2&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.f,{date:D,minDate:i,maxDate:C,locale:(0,u.t4)(Z),onChange:N}),(0,a.jsx)(r.f,{date:C,minDate:D,maxDate:h,locale:(0,u.t4)(Z),onChange:w})]})]}),(0,a.jsxs)("div",{className:m().buttons,children:[(0,a.jsx)(r.zx,{variant:"primary",onClick:()=>{j===x.Lx?v("range:".concat(g.getTime(),":").concat(g.getTime())):v("range:".concat(D.getTime(),":").concat(C.getTime()))},disabled:M,children:k(y.save)}),(0,a.jsx)(r.zx,{onClick:f,children:k(y.cancel)})]})]})},f=n(91534),j=n(43756);let b=e=>{let{startDate:t,endDate:n,selectedUnit:s,onClick:i}=e,{locale:l}=(0,d.Z)(),o=1==+(null==s?void 0:s.num)&&(null==s?void 0:s.unit)==="month";return(0,a.jsxs)(r.DL,{gap:10,alignItems:"center",wrap:"nowrap",children:[(0,a.jsx)(r.JO,{className:"mr-2",onClick:function(e){e.stopPropagation(),i()},children:(0,a.jsx)(j.Z.Calendar,{})}),(0,a.jsx)(r.xv,{children:o?(0,a.jsx)(a.Fragment,{children:(0,f.p6)(t,"MMMM yyyy",l)}):(0,a.jsxs)(a.Fragment,{children:[(0,f.p6)(t,"d LLL y",l),!(0,c.Z)(t,n)&&" â€” ".concat((0,f.p6)(n,"d LLL y",l))]})})]})};var g=function(e){let{value:t,startDate:n,endDate:c,className:l,onChange:o,selectedUnit:d,showAllTime:u=!1,alignment:x="end"}=e,{formatMessage:h,labels:m}=(0,_.Z)(),[f,j]=(0,s.useState)(!1),g=[{label:h(m.today),value:"1day"},{label:h(m.lastHours,{x:24}),value:"24hour"},{label:h(m.yesterday),value:"-1day"},{label:h(m.thisWeek),value:"1week",divider:!0},{label:h(m.lastDays,{x:7}),value:"7day"},{label:h(m.thisMonth),value:"1month",divider:!0},{label:h(m.lastDays,{x:30}),value:"30day"},{label:h(m.lastDays,{x:90}),value:"90day"},{label:h(m.thisYear),value:"1year"},u&&{label:h(m.allTime),value:"all",divider:!0},{label:h(m.customRange),value:"custom",divider:!0}].filter(e=>e),p=e=>{if("custom"===e){j(!0);return}o(e)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Lt,{className:l,items:g,renderValue:e=>e.startsWith("range")?(0,a.jsx)(b,{startDate:n,endDate:c,selectedUnit:d,onClick:()=>p("custom")}):g.find(t=>t.value===e).label,value:t,alignment:x,placeholder:h(m.selectDate),onChange:p,children:e=>{let{label:t,value:n,divider:s}=e;return(0,a.jsx)(r.ck,{divider:s,children:t},n)}}),f&&(0,a.jsx)(r.u_,{onClose:()=>j(!1),children:(0,a.jsx)(v,{startDate:n,endDate:c,minDate:new Date(2e3,0,1),maxDate:(0,i.Z)(new Date),onChange:e=>{j(!1),o(e)},onClose:()=>j(!1)})})]})}},98757:function(e,t,n){"use strict";var a=n(85893),s=n(77689),r=n(42699),i=n(91534),c=n(29120),l=n(4647),o=n(65918),d=n.n(o);t.Z=function(e){let{websiteId:t}=e,[n,o]=(0,s.Z)(t),{value:u,startDate:x,endDate:_,selectedUnit:h}=n,m="all"!==u&&h&&(0,r.Z)((0,i.D)(n,-1).startDate,new Date),v=e=>{o((0,i.D)(n,e))};return(0,a.jsxs)(c.DL,{justifyContent:"center",gap:10,children:["all"!==u&&h&&(0,a.jsxs)(c.DL,{justifyContent:"center",className:d().buttons,children:[(0,a.jsx)(c.zx,{onClick:()=>v(1),children:(0,a.jsx)(c.JO,{rotate:90,children:(0,a.jsx)(c.PJ.ChevronDown,{})})}),(0,a.jsx)(c.zx,{onClick:()=>v(-1),disabled:m,children:(0,a.jsx)(c.JO,{rotate:270,children:(0,a.jsx)(c.PJ.ChevronDown,{})})})]}),(0,a.jsx)(l.Z,{className:d().dropdown,value:u,startDate:x,endDate:_,selectedUnit:h,onChange:e=>{o(e)},showAllTime:!0})]})}},20495:function(e,t,n){"use strict";var a=n(85893),s=n(94184),r=n.n(s),i=n(69926),c=n(29163),l=n(32915),o=n.n(l);t.Z=e=>{let{value:t=0,change:n=0,label:s,reverseColors:l=!1,format:d=c.uf,hideComparison:u=!1,className:x}=e,_=(0,i.q_)({x:Number(t)||0,from:{x:0}}),h=(0,i.q_)({x:Number(n)||0,from:{x:0}});return(0,a.jsxs)("div",{className:r()(o().card,x),children:[(0,a.jsx)(i.q.div,{className:o().value,children:_.x.to(e=>d(e))}),(0,a.jsxs)("div",{className:o().label,children:[s,0!=~~n&&!u&&(0,a.jsx)(i.q.span,{className:r()(o().change,{[o().positive]:n*(l?-1:1)>=0,[o().negative]:n*(l?-1:1)<0,[o().plusSign]:n>0}),children:h.x.to(e=>d(e))})]})]})}},20691:function(e,t,n){"use strict";var a=n(85893),s=n(67294),r=n(29120),i=n(68716),c=n(87076),l=n.n(c),o=n(29163);t.Z=function(e){let{children:t,isLoading:n,isFetched:c,error:d}=e,[u,x]=(0,s.useState)(!0),_=u?e=>e>=0?(0,o.mu)(e):"-".concat((0,o.mu)(Math.abs(e))):o.uf;return(0,a.jsxs)("div",{className:l().bar,onClick:()=>{x(e=>!e)},children:[n&&!c&&(0,a.jsx)(r.gb,{icon:"dots"}),d&&(0,a.jsx)(i.Z,{}),(0,r.ve)(t,e=>({format:e.props.format||_}))]})}},21466:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var a=n(85893),s=n(94184),r=n.n(s),i=n(29120),c=n(41664),l=n.n(c),o=n(11163),d=n(165),u=n.n(d),x=function(e){let{domain:t,...n}=e,s=t?function(e){let t=e.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:/\n?=]+)/im);return t&&t.length>1?t[1]:null}(t):null;return s?(0,a.jsx)("img",{className:u().favicon,src:"https://icons.duckduckgo.com/ip3/".concat(s,".ico"),height:"16",alt:"",...n}):null},_=n(67294),h=n(35338),m=n(44085),v=n(1707),f=n.n(v),j=function(e){let{websiteId:t,value:n,refetchInterval:s=6e4}=e,{formatMessage:r,messages:c}=(0,m.Z)(),{get:l,useQuery:o}=(0,h.Z)(),{data:d}=o(["websites:active",t],()=>l("/websites/".concat(t,"/active")),{refetchInterval:s,enabled:!!t}),u=(0,_.useMemo)(()=>{if(t){var e;return(null==d?void 0:null===(e=d[0])||void 0===e?void 0:e.x)||0}return void 0!==n?n:0},[d,n,t]);return 0===u?null:(0,a.jsx)(i.KT,{className:f().container,variant:"success",children:(0,a.jsx)("div",{className:f().text,children:r(c.activeUsers,{x:u})})})},b=n(43756),g=n(24474),p=n(41150),D=n.n(p),N=function(e){let{websiteId:t,showLinks:n=!0,children:s}=e,{formatMessage:c,labels:d}=(0,g.y_)(),{pathname:u}=(0,o.useRouter)(),{data:_}=(0,g.jG)(t),{name:h,domain:m}=_||{},v=[{label:c(d.overview),icon:(0,a.jsx)(b.Z.Overview,{}),path:""},{label:c(d.realtime),icon:(0,a.jsx)(b.Z.Clock,{}),path:"/realtime"},{label:c(d.reports),icon:(0,a.jsx)(b.Z.Reports,{}),path:"/reports"},{label:c(d.eventData),icon:(0,a.jsx)(b.Z.Nodes,{}),path:"/event-data"}];return(0,a.jsxs)(i.X2,{className:D().header,justifyContent:"center",children:[(0,a.jsxs)(i.sg,{className:D().title,variant:"two",children:[(0,a.jsx)(x,{domain:m}),(0,a.jsx)(i.xv,{children:h}),(0,a.jsx)(j,{websiteId:t})]}),(0,a.jsxs)(i.sg,{className:D().actions,variant:"two",children:[n&&(0,a.jsx)("div",{className:D().links,children:v.map(e=>{let{label:n,icon:s,path:c}=e,o=c?u.endsWith(c):"/websites/[id]"===u;return(0,a.jsx)(l(),{href:"/websites/".concat(t).concat(c),shallow:!0,children:(0,a.jsxs)(i.zx,{variant:"quiet",className:r()({[D().selected]:o}),children:[(0,a.jsx)(i.JO,{className:D().icon,children:s}),(0,a.jsx)(i.xv,{className:D().label,children:n})]})},n)})}),s]})]})}},29163:function(e,t,n){"use strict";function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["m","s"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",{days:a,hours:s,minutes:r,seconds:i,ms:c}=function(e){let t=~~(e/86400),n=~~(e/3600)-24*t,a=~~(e/60)-1440*t-60*n;return{days:t,hours:n,minutes:a,seconds:~~e-86400*t-3600*n-60*a,ms:(e-~~e)*1e3}}(e),l="";return(a>0&&-1!==t.indexOf("d")&&(l+="".concat(a,"d").concat(n)),s>0&&-1!==t.indexOf("h")&&(l+="".concat(s,"h").concat(n)),r>0&&-1!==t.indexOf("m")&&(l+="".concat(r,"m").concat(n)),i>0&&-1!==t.indexOf("s")&&(l+="".concat(i,"s").concat(n)),c>0&&-1!==t.indexOf("ms")&&(l+="".concat(c,"ms")),l)?l:"0".concat(t[t.length-1])}function s(e){return Number(e).toFixed(0)}function r(e){let t=Number(e);return t>=1e6?"".concat((t/1e6).toFixed(1),"m"):t>=1e5?"".concat((t/1e3).toFixed(0),"k"):t>=1e4?"".concat((t/1e3).toFixed(1),"k"):t>=1e3?"".concat((t/1e3).toFixed(2),"k"):s(t)}function i(e){if(!e)return"#ffffff";let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);let n="#";for(let e=0;e<3;e++)n+=("00"+(t>>8*e&255).toString(16)).slice(-2);return n}n.d(t,{mu:function(){return r},u_:function(){return i},uf:function(){return s},vM:function(){return a}})},19733:function(e){e.exports={error:"ErrorMessage_error__wwnDI",icon:"ErrorMessage_icon__o7QK6"}},165:function(e){e.exports={favicon:"Favicon_favicon__jjbzI"}},65918:function(e){e.exports={dropdown:"WebsiteDateFilter_dropdown__7s5BK",buttons:"WebsiteDateFilter_buttons__IGusS"}},1707:function(e){e.exports={container:"ActiveUsers_container___JH1q",text:"ActiveUsers_text__9rsD0",value:"ActiveUsers_value__H3uVq"}},39030:function(e){e.exports={container:"DatePickerForm_container__MygMe",calendars:"DatePickerForm_calendars__wK_V1",filter:"DatePickerForm_filter__iM5CX",buttons:"DatePickerForm_buttons__j7UzK"}},32915:function(e){e.exports={card:"MetricCard_card__NX9Nc",value:"MetricCard_value__m2Mhp",label:"MetricCard_label__PQabu",change:"MetricCard_change__DYILr",positive:"MetricCard_positive__9P20B",negative:"MetricCard_negative__eaMcO",plusSign:"MetricCard_plusSign__T6tMd"}},87076:function(e){e.exports={bar:"MetricsBar_bar__MpaRI",card:"MetricsBar_card__Pt1Tm"}},41150:function(e){e.exports={header:"WebsiteHeader_header__wK7qo",title:"WebsiteHeader_title__9N6pA",actions:"WebsiteHeader_actions__pG1GW",selected:"WebsiteHeader_selected__dGZmw",links:"WebsiteHeader_links___XsS_",label:"WebsiteHeader_label__jOZTy",icon:"WebsiteHeader_icon__TVV3d"}}}]);